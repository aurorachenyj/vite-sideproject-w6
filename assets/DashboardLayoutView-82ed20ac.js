import{_ as g,m as b,d as S,r as u,o as h,c as _,a as t,e as a,f as l,t as i,j as k,F as y,k as c}from"./index-1873f96c.js";import{f as m}from"./frontOrderStore-3e0dfa12.js";const{VITE_APP_URL:p}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"aurora-path",BASE_URL:"/vite-sideproject-w6/",MODE:"production",DEV:!1,PROD:!0},x={data(){return{totalSalesMoney:null,totalStudentNum:null,totalClassSalesNum:null}},created(){this.checkAdmin()},mounted(){this.getStuOrderList()},watch:{finalStuOrderData(){this.calcSaleData()}},computed:{...b(m,["finalStuOrderData"])},methods:{...S(m,["getStuOrderList"]),calcSaleData(){console.log("u.3ql3"),console.log(this.finalStuOrderData);let s=0,o=0;this.finalStuOrderData.forEach(e=>{o+=e.stuNum,e.fundingPrice===void 0?(console.log(e),s+=e.stuNum*e.classPrice):(console.log(e),s+=e.stuNum*e.classFundingPrice)}),console.log(s),this.totalSalesMoney=s,this.totalStudentNum=o,this.totalClassSalesNum=this.finalStuOrderData.length},checkAdmin(){const s=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=s,this.$http.post(`${p}/api/user/check`).then(o=>{o.data.success||this.$router.push("/adminLogin")}).catch(()=>{alert("請重新登入驗證"),this.$router.push("/adminLogin")})},adminLogout(){this.$http.post(`${p}/logout`).then(s=>{alert(s.data.message),this.$router.push("/adminLogin")}).catch(s=>{alert(s.response.data.message)})}}},w={class:"overflow-auto"},L={class:"fixed-top navbar navbar-expand-lg navbar-light bg-light text-nowrap flex-nowrap justify-content-evenly"},N={key:0,class:"main-content",style:{"margin-top":"80px"}},D={class:"container my-4"},O={class:"row gy-3"},P={class:"col"},V={class:"card shadow-sm"},$={class:"card-body pb-0"},A=t("h4",{class:"text-end"},"學生總數",-1),E={class:"display-4 fw-bold pb-0 text-end"},R={class:"col"},C={class:"card shadow-sm"},T={class:"card-body pb-0"},B=t("h4",{class:"text-end"},"已有學生之課程數",-1),M={class:"display-4 fw-bold pb-0 text-end"},j={class:"col"},F={class:"card shadow-sm"},I={class:"card-body pb-0"},U=t("h4",{class:"text-end"},"營業額",-1),q={class:"display-4 fw-bold pb-0 text-end"};function z(s,o,e,H,d,r){const n=u("RouterLink"),f=u("RouterView");return h(),_(y,null,[t("div",w,[t("nav",L,[a(n,{to:"/admin/index",class:"nav-link me-3 navbar-hover"},{default:l(()=>[c("後台首頁")]),_:1}),a(n,{to:"/admin/order",class:"nav-link me-3 navbar-hover"},{default:l(()=>[c("訂單管理")]),_:1}),a(n,{to:"/admin/coupon",class:"nav-link me-3 navbar-hover"},{default:l(()=>[c("優惠券管理")]),_:1}),a(n,{to:"/admin/courses",class:"nav-link me-3"},{default:l(()=>[c("課程管理")]),_:1}),a(n,{to:"/admin/content",class:"nav-link me-3"},{default:l(()=>[c("文章管理")]),_:1}),a(n,{to:"/adminLogin",class:"nav-link me-3"},{default:l(()=>[c("回後台登入")]),_:1}),a(n,{to:"/",class:"nav-link me-3"},{default:l(()=>[c("回前台")]),_:1}),t("button",{class:"btn btn-outline-dark btn-sm me-3",type:"button",onClick:o[0]||(o[0]=(...v)=>r.adminLogout&&r.adminLogout(...v))}," 登出 ")])]),s.finalStuOrderData?(h(),_("main",N,[t("div",D,[t("div",O,[t("div",P,[t("div",V,[t("div",$,[A,t("p",E,i(d.totalStudentNum),1)])])]),t("div",R,[t("div",C,[t("div",T,[B,t("p",M,i(d.totalClassSalesNum),1)])])]),t("div",j,[t("div",F,[t("div",I,[U,t("p",q,i(d.totalSalesMoney),1)])])])]),a(f)])])):k("",!0)],64)}const K=g(x,[["render",z]]);export{K as default};
