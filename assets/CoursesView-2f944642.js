import{h as f}from"./zh-tw-a6f00c05.js";import{_ as T,m as _,d as p,n as N,r as w,o as i,c as n,e as k,a as t,t as l,h as c,I as d,k as m,F as C,D as y,j as b,f as D,G as B}from"./index-08966c63.js";import{c as x}from"./cartStore-0304ee62.js";import{f as L}from"./frontOrderStore-439a1d37.js";import{b as S}from"./bookmarkStore-55f0d1e5.js";import"./Toast-389aab69.js";const{VITE_APP_URL:P,VITE_APP_PATH:I}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"aurora-path",BASE_URL:"/vite-sideproject-w6/",MODE:"production",DEV:!1,PROD:!0},V={data(){return{loadItem:!1,isLoading:!1,pageClassData:[],currentPage:1,clickItem:""}},created(){f.locale("zh-tw")},mounted(){this.getpageData(),this.getStuOrderList(),this.getLocalStorageBookmark()},watch:{currentPage(){this.getpageData(this.currentPage)},showbookmarkData(){this.setLocalStorageBookmark()},ShowCourseList(){this.getCartList()},cartList(){this.checkedClass()},showFinalStuOrderData(){this.matchStuNumAndClass(),this.matchFundingTarget()}},computed:{..._(x,["cartList","ShowCourseList","showCheck"]),..._(L,["showFinalStuOrderData"]),..._(S,["showbookmarkData"])},methods:{...p(x,["getCartList","addToCart","checkedClass","getAllCourse"]),...p(L,["getStuOrderList","matchFundingTarget","matchStuNumAndClass"]),...p(S,["setLocalStorageBookmark","getLocalStorageBookmark","BookmarkAction"]),changePage(s){this.currentPage=s,window.scrollTo({top:0})},getpageData(s=1,o=null){console.log(s),console.log(o);let u="";o===null?u=`${P}/api/${I}/products?page=${s}`:o!=null&&(u=`${P}/api/${I}/products?page=${s}&category=${o}`),N.get(u).then(h=>{console.log(h),this.pageClassData=h.data,this.currentPage=h.data.pagination.current_page,window.scrollTo({top:0}),console.log(this.pageClassData)}).catch(h=>{console.log(h)})},countLeftDay(s){return Date.parse(new Date)>s?"已":(s=new Date(s).toISOString(),f(s).fromNow())}}},F={class:"container mb-5 full-height"},O={class:"mt-5",style:{},"aria-label":"breadcrumb"},E={class:"breadcrumb"},j=t("li",{class:"breadcrumb-item"},[t("a",{href:"#",class:"text-decoration-none text-muted"},"首頁")],-1),z={class:"breadcrumb-item active","aria-current":"page"},U={href:"#",class:"text-decoration-none text-dark"},R={class:"mb-5"},H={class:"row g-4"},M={class:"col-md-1"},G={class:"overflow-auto sticky-top",style:{top:"120px"}},q={class:"list-group bg-darkblue list-group-flush d-flex flex-row flex-md-column"},J=t("br",null,null,-1),K=t("br",null,null,-1),Q={class:"col-md-11"},W={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"},X={key:0,class:"card h-100 hover-shadow"},Y={class:"ratio ratio-16x9 overflow-hidden"},Z=["src"],$={class:"position-absolute top-rem-1 start-rem-1"},tt={class:"badge bg-darkblue me-2"},et=t("span",{class:"badge bg-secondary"}," 已開課",-1),st={class:"card-body"},ot={class:"h-100 d-flex flex-column"},at={class:"d-flex justify-content-between"},it=["onClick"],nt=["onClick"],lt={class:"mt-auto"},rt={class:"mb-2"},ct={class:"mb-0"},dt=t("i",{class:"bi bi-book"},null,-1),mt={class:"mb-0"},ht=t("i",{class:"bi bi-card-list"},null,-1),gt={class:"text-primary fw-bold h3"},ut={class:"d-flex justify-content-between mt-2 align-items-center"},_t={class:"text-muted mb-0"},pt={key:0,href:"#/cart",type:"button",class:"btn btn-primary text-white btn-sm"},kt=["disabled","onClick"],bt={key:1,class:"card h-100 hover-shadow"},vt={class:"ratio ratio-16x9 overflow-hidden"},ft=["src"],wt={class:"position-absolute top-rem-1 start-rem-1"},Ct={class:"badge bg-darkblue me-2"},yt=t("span",{class:"badge bg-white text-primary fw-bold"}," 募資中",-1),Dt={class:"card-body"},xt={class:"h-100 d-flex flex-column"},Lt={class:"d-flex justify-content-between"},St=["onClick"],Pt=["onClick"],It={key:0,class:"mt-auto"},At={class:"mb-0 mt-1 mb-2"},Tt={class:"text-primary fw-bold h3"},Nt={class:"progress",style:{height:"20px"}},Bt={class:"d-flex justify-content-between"},Vt={class:"mb-0 text-muted"},Ft={class:"text-muted mb-0"},Ot={class:"text-secondary fw-bolder"},Et={class:"d-flex justify-content-between mt-2"},jt={class:"text-muted mb-0"},zt={key:0,href:"#/cart",type:"button",class:"btn btn-primary text-white btn-sm"},Ut=["onClick"],Rt={key:0,"aria-label":"Page navigation ",class:"mt-5"},Ht={class:"pagination justify-content-center"},Mt=t("a",{class:"page-link",href:"#","aria-label":"Previous"},[t("span",{"aria-hidden":"true"},"«")],-1),Gt=[Mt],qt=["onClick"],Jt={class:"page-link",href:"#"},Kt=t("a",{class:"page-link",href:"","aria-label":"Next"},[t("span",{"aria-hidden":"true"},"»")],-1),Qt=[Kt];function Wt(s,o,u,h,a,r){const A=w("LoadingVue"),v=w("RouterLink");return i(),n("div",F,[k(A,{active:a.isLoading,"onUpdate:active":o[0]||(o[0]=e=>a.isLoading=e)},null,8,["active"]),t("nav",O,[t("ol",E,[j,t("li",z,[t("a",U,l(a.clickItem),1)])])]),t("h3",R,l(a.clickItem),1),t("div",H,[t("div",M,[t("div",G,[t("div",q,[t("a",{href:".#/courses",onClick:o[1]||(o[1]=c(e=>{a.clickItem="所有課程",r.getpageData(1)},["prevent"])),class:d([{active:a.clickItem==="所有課程"},"list-group-item list-group-item-action"])},[m(" 所有"),J,m(" 課程")],2),t("a",{href:".#/courses",onClick:o[2]||(o[2]=c(e=>{a.clickItem="語言",r.getpageData(1,"語言")},["prevent"])),class:d([{active:a.clickItem==="語言"},"list-group-item list-group-item-action"])},"語言",2),t("a",{href:".#/courses",onClick:o[3]||(o[3]=c(e=>{a.clickItem="藝術",r.getpageData(1,"藝術")},["prevent"])),class:d([{active:a.clickItem==="藝術"},"list-group-item list-group-item-action"])},"藝術",2),t("a",{href:"#",onClick:o[4]||(o[4]=c(e=>{a.clickItem="攝影",r.getpageData(1,"攝影")},["prevent"])),class:d([{active:a.clickItem==="攝影"},"list-group-item list-group-item-action"])},"攝影",2),t("a",{href:"#",onClick:o[5]||(o[5]=c(e=>{a.clickItem="商業",r.getpageData(1,"商業")},["prevent"])),class:d([{active:a.clickItem==="商業"},"list-group-item list-group-item-action"])},"商業",2),t("a",{href:"#",onClick:o[6]||(o[6]=c(e=>{a.clickItem="投資理財",r.getpageData(1,"投資理財")},["prevent"])),class:d([{active:a.clickItem==="投資理財"},"list-group-item list-group-item-action border-bottom"])},[m("投資"),K,m("理財")],2)])])]),t("div",Q,[t("div",W,[(i(!0),n(C,null,y(a.pageClassData.products,e=>(i(),n("div",{class:"col position-relative",key:e.id},[e.courseStatus==="classOpen"?(i(),n("div",X,[k(v,{to:`/course/${e.id}`,class:"text-decoration-none"},{default:D(()=>[t("div",Y,[t("img",{src:e.imageUrl,class:"card-img-top img-cover img-hover-enlarge",alt:"..."},null,8,Z)]),t("div",$,[t("span",tt,l(e.category),1),et])]),_:2},1032,["to"]),t("div",st,[t("div",ot,[t("div",at,[t("h5",null,l(e.title),1),s.showbookmarkData.includes(e.id)?(i(),n("i",{key:0,class:"bi bi-bookmark-fill img-hover-enlarge",onClick:g=>s.BookmarkAction(e.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,it)):(i(),n("i",{key:1,class:"bi bi-bookmark img-hover-enlarge",onClick:g=>s.BookmarkAction(e.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,nt))]),t("div",lt,[t("div",rt,[t("p",ct,[dt,m(" "+l(e.unit)+" 小時 ",1)]),t("p",mt,[ht,m(" "+l(e.classSectionNum)+" 章節 "+l(e.classUnitNum)+" 單元 ",1)])]),t("p",null,[t("del",null,"NT$ "+l(e.origin_price),1),t("span",gt," NT$ "+l(e.price),1)]),t("div",ut,[t("p",_t," 同學 "+l(s.matchStuNumAndClass(e.id))+" 人 ",1),s.showCheck.includes(e.id)?(i(),n("a",pt," 已選購，結帳去 ")):(i(),n("button",{key:1,disabled:s.sendLoadItem===!0,onClick:g=>s.addToCart(e.id),class:"btn btn-outline-primary btn-sm"}," 加入購物車 ",8,kt))])])])])])):e.courseStatus==="classFunding"?(i(),n("div",bt,[k(v,{to:`/course/${e.id}`,class:"text-decoration-none"},{default:D(()=>[t("div",vt,[t("img",{src:e.imageUrl,class:"card-img-top img-cover img-hover-enlarge",alt:"..."},null,8,ft)]),t("div",wt,[t("span",Ct,l(e.category),1),yt])]),_:2},1032,["to"]),t("div",Dt,[t("div",xt,[t("div",Lt,[t("h5",null,l(e.title),1),s.showbookmarkData.includes(e.id)?(i(),n("i",{key:0,class:"bi bi-bookmark-fill img-hover-enlarge",onClick:g=>s.BookmarkAction(e.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,St)):(i(),n("i",{key:1,class:"bi bi-bookmark img-hover-enlarge",onClick:g=>s.BookmarkAction(e.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,Pt))]),s.showFinalStuOrderData?(i(),n("div",It,[t("p",At,[m(" 募資價 "),t("span",Tt," NT$ "+l(e.funding_price),1)]),t("div",Nt,[t("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100",style:B({width:s.matchFundingTarget(e.id)+"%"})},null,4)]),t("div",Bt,[t("p",Vt," 達標率 "+l(s.matchFundingTarget(e.id))+" % ",1),t("p",Ft,[t("span",Ot,l(r.countLeftDay(e.fundingEndDate)),1),m(" 結束 ")])]),t("div",Et,[t("p",jt," 同學 "+l(s.matchStuNumAndClass(e.id))+" 人 ",1),s.showCheck.includes(e.id)?(i(),n("a",zt," 已選購，結帳去 ")):(i(),n("button",{key:1,onClick:g=>s.addToCart(e.id),class:"btn btn-outline-primary btn-sm"}," 加入購物車 ",8,Ut))])])):b("",!0)])])])):b("",!0)]))),128))])])]),a.pageClassData.pagination?(i(),n("nav",Rt,[t("ul",Ht,[t("li",{class:d(["page-item",{disabled:!a.pageClassData.pagination.has_pre}]),onClick:o[7]||(o[7]=c(e=>r.changePage(a.currentPage-1),["prevent"]))},Gt,2),(i(!0),n(C,null,y(a.pageClassData.pagination.total_pages,e=>(i(),n("li",{class:d(["page-item",{active:e===a.currentPage}]),key:e+"hello",onClick:c(g=>r.changePage(e),["prevent"])},[t("a",Jt,l(e),1)],10,qt))),128)),t("li",{class:d(["page-item",{disabled:!a.pageClassData.pagination.has_next}]),onClick:o[8]||(o[8]=c(e=>r.changePage(a.currentPage+1),["prevent"]))},Qt,2)])])):b("",!0)])}const se=T(V,[["render",Wt]]);export{se as default};
