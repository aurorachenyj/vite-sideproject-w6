import{_ as p,m as v,r as h,o as f,b,d as t,e,w as l,t as i,F as g,i as c}from"./index-957ec83c.js";import{o as w}from"./orderStore-b7ad53ac.js";import"./Toast-c723ed56.js";const{VITE_APP_URL:u,VITE_APP_PATH:J}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"aurora-path",BASE_URL:"/vite-sideproject-w6/",MODE:"production",DEV:!1,PROD:!0},k={data(){return{totalSalesMoney:null,totalStudentNum:null,totalClassSalesNum:null}},created(){this.checkAdmin()},mounted(){},watch:{showFinalorderInfoData(){this.calcSaleData()}},computed:{...v(w,["showFinalorderInfoData"])},methods:{calcSaleData(){console.log(this.showFinalorderInfoData);let s=0,a=0;this.showFinalorderInfoData.forEach(o=>{a+=o.classmateNum,o.fundingPrice===void 0?(console.log(o),s+=o.classmateNum*o.price):(console.log(o),s+=o.classmateNum*o.fundingPrice)}),this.totalSalesMoney=s,this.totalStudentNum=a,this.totalClassSalesNum=this.showFinalorderInfoData.length},checkAdmin(){const s=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=s,this.$http.post(`${u}/api/user/check`).then(a=>{a.data.success||this.$router.push("/adminLogin")}).catch(a=>{alert("請重新登入驗證"),this.$router.push("/adminLogin")})},adminLogout(){this.$http.post(`${u}/logout`).then(s=>{alert(s.data.message),this.$router.push("/adminLogin")}).catch(s=>{alert(s.response.data.message)})}}},x={class:"overflow-auto"},y={class:"fixed-top navbar navbar-expand-lg navbar-light bg-light text-nowrap flex-nowrap justify-content-evenly"},S={class:"main-content",style:{"margin-top":"80px"}},L={class:"container my-4"},N={class:"row gy-3"},P={class:"col"},D={class:"card shadow-sm"},V={class:"card-body pb-0"},A=t("h4",{class:"text-end"},"學生總數",-1),$={class:"display-4 fw-bold pb-0 text-end"},E={class:"col"},I={class:"card shadow-sm"},R={class:"card-body pb-0"},T=t("h4",{class:"text-end"},"已有學生之課程數",-1),F={class:"display-4 fw-bold pb-0 text-end"},C={class:"col"},B={class:"card shadow-sm"},M={class:"card-body pb-0"},U=t("h4",{class:"text-end"},"營業額",-1),j={class:"display-4 fw-bold pb-0 text-end"};function H(s,a,o,O,d,r){const n=h("RouterLink"),_=h("RouterView");return f(),b(g,null,[t("div",x,[t("nav",y,[e(n,{to:"/admin/index",class:"nav-link me-3 navbar-hover"},{default:l(()=>[c("後台首頁")]),_:1}),e(n,{to:"/admin/order",class:"nav-link me-3 navbar-hover"},{default:l(()=>[c("訂單管理")]),_:1}),e(n,{to:"/admin/coupon",class:"nav-link me-3 navbar-hover"},{default:l(()=>[c("優惠券管理")]),_:1}),e(n,{to:"/admin/courses",class:"nav-link me-3"},{default:l(()=>[c("課程管理")]),_:1}),e(n,{to:"/admin/content",class:"nav-link me-3"},{default:l(()=>[c("文章管理")]),_:1}),e(n,{to:"/adminLogin",class:"nav-link me-3"},{default:l(()=>[c("回後台登入")]),_:1}),e(n,{to:"/",class:"nav-link me-3"},{default:l(()=>[c("回前台")]),_:1}),t("button",{class:"btn btn-outline-dark btn-sm me-3",type:"button",onClick:a[0]||(a[0]=(...m)=>r.adminLogout&&r.adminLogout(...m))}," 登出 ")])]),t("main",S,[t("div",L,[t("div",N,[t("div",P,[t("div",D,[t("div",V,[A,t("p",$,i(d.totalStudentNum),1)])])]),t("div",E,[t("div",I,[t("div",R,[T,t("p",F,i(d.totalClassSalesNum),1)])])]),t("div",C,[t("div",B,[t("div",M,[U,t("p",j,i(d.totalSalesMoney),1)])])])]),e(_)])])],64)}const K=p(k,[["render",H]]);export{K as default};
