import{T as f}from"./Toast-9189e13f.js";import{_ as k,m as F,b as T,r as _,o as n,c as i,e,h as d,J as p,d as l,w as L,t as c,F as v,D as x,j as A,k as w,I as h,v as P}from"./index-f60a82a8.js";import{c as y}from"./cartStore-eec3a350.js";const{VITE_APP_URL:U,VITE_APP_PATH:C}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"aurora-path",BASE_URL:"/vite-sideproject-w6/",MODE:"production",DEV:!1,PROD:!0},E={data(){return{orderForm:{user:{name:"",tel:"09",email:"",address:"免填地址",payment:"信用卡"},message:""}}},mounted(){this.getCartList()},computed:{...F(y,["cartList"])},methods:{sendOrder(){if(this.cartList.carts.length===0){alert("購物車內無商品"),this.$router.push("/courses");return}const a=this.orderForm;this.$http.post(`${U}/api/${C}/order`,{data:a}).then(s=>{const{orderId:b}=s.data;this.clearCartList(),f.fire({icon:"success",title:s.data.message}),this.$router.push(`/orderCheck/${b}`)}).catch(s=>{f.fire({icon:"error",title:s.response.data.message})})},...T(y,["getCartList","clearCartList"])}},M={class:"container mt-5"},D=e("h3",{class:"my-3 d-inline me-2"},"結帳",-1),N=e("a",{href:"#/cart",class:"badge bg-secondary text-decoration-none align-middle text-white mb-2"},[e("i",{class:"bi bi-arrow-bar-left"}),w(" 回購物車頁")],-1),S={class:"row g-4 mt-2"},O={class:"col-md-8"},R={class:"bg-light mb-3 p-3"},B=e("h5",{class:"mb-3 pb-3 border-bottom"},"付款方式",-1),I={class:"form-check pb-2"},q=e("label",{class:"form-check-label",for:"card"}," 信用卡 ",-1),j={class:"form-check pb-2"},H=e("label",{class:"form-check-label",for:"ATM"}," ATM ",-1),z={class:"form-check pb-2"},J=e("label",{class:"form-check-label",for:"store"}," 超商付款 ",-1),G={class:"bg-light p-3"},K=e("h5",{class:"mb-3 pb-3 border-bottom"},"資料填寫",-1),Q={class:"mb-3"},W=e("label",{for:"user",class:"form-label"},"姓名",-1),X={class:"mb-3"},Y=e("label",{for:"phone",class:"form-label"},"手機",-1),Z={class:"mb-3"},$=e("label",{for:"user",class:"form-label"},"聯絡信箱",-1),ee={class:"mb-3"},se=e("label",{for:"message",class:"form-label"},"留言",-1),oe=e("div",{class:"text-center"},[e("button",{type:"submit",class:"btn btn-outline-primary w-50"}," 送出訂單 ")],-1),te={class:"col-md-4"},re={key:0},le={class:"bg-light p-3"},ae=e("h5",{class:"text-center border-bottom py-3"},"訂單明細",-1),ne={class:"d-inline"},ie={class:"py-3 list-unstyled"},de={class:"mb-1"},ce={class:"text-end mb-1"},me=e("p",{class:"d-inline"},"總計",-1),ue={class:"text-primary text-end"},_e=e("br",null,null,-1),pe=e("br",null,null,-1),he=e("br",null,null,-1),be=e("br",null,null,-1),fe=e("br",null,null,-1);function ve(a,s,b,ye,o,g){const m=_("v-field"),u=_("error-message"),V=_("v-form");return n(),i(v,null,[e("div",M,[D,N,e("div",S,[e("div",O,[e("div",R,[B,e("div",I,[d(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>o.orderForm.user.payment=t),value:"信用卡",class:"form-check-input",type:"radio",name:"payment",id:"card"},null,512),[[p,o.orderForm.user.payment]]),q]),e("div",j,[d(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>o.orderForm.user.payment=t),value:"ATM",class:"form-check-input",type:"radio",name:"payment",id:"ATM"},null,512),[[p,o.orderForm.user.payment]]),H]),e("div",z,[d(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>o.orderForm.user.payment=t),value:"超商付款",class:"form-check-input",type:"radio",name:"payment",id:"store"},null,512),[[p,o.orderForm.user.payment]]),J])]),e("div",G,[K,l(V,{class:"",onSubmit:g.sendOrder},{default:L(({errors:t})=>[e("div",Q,[W,l(m,{name:"姓名",modelValue:o.orderForm.user.name,"onUpdate:modelValue":s[3]||(s[3]=r=>o.orderForm.user.name=r),class:h([{"is-invalid":t.姓名},"form-control"]),id:"user",type:"text",placeholder:"請輸入真實姓名",rules:"required|min:2"},null,8,["modelValue","class"]),l(u,{name:"姓名",class:"invalid-feedback"})]),e("div",X,[Y,l(m,{name:"手機號碼",modelValue:o.orderForm.user.tel,"onUpdate:modelValue":s[4]||(s[4]=r=>o.orderForm.user.tel=r),class:h([{"is-invalid":t.手機號碼},"form-control"]),id:"phone",type:"tel",placeholder:"請輸入手機號碼",rules:"required|numeric|min:9"},null,8,["modelValue","class"]),l(u,{name:"手機號碼",class:"invalid-feedback"})]),e("div",Z,[$,l(m,{name:"信箱",modelValue:o.orderForm.user.email,"onUpdate:modelValue":s[5]||(s[5]=r=>o.orderForm.user.email=r),class:h([{"is-invalid":t.信箱},"form-control"]),id:"user",type:"email",placeholder:"請輸入信箱",rules:"required|email"},null,8,["modelValue","class"]),l(u,{name:"信箱",class:"invalid-feedback"})]),e("div",ee,[se,d(e("textarea",{"onUpdate:modelValue":s[6]||(s[6]=r=>o.orderForm.message=r),class:"form-control",id:"message",placeholder:"選填",rows:"3"},null,512),[[P,o.orderForm.message]])]),oe]),_:1},8,["onSubmit"])])]),e("div",te,[a.cartList.carts?(n(),i("div",re,[e("div",le,[ae,e("p",ne,"購買列表 ("+c(a.cartList.carts.length)+")",1),e("ul",ie,[(n(!0),i(v,null,x(a.cartList.carts,t=>(n(),i("li",{key:t.id,class:"border-bottom rounded-3 p-2 bg-white"},[e("p",de,c(t.product.title),1),e("p",ce,"NT$ "+c(t.final_total),1)]))),128))]),me,e("h4",ue," NT$ "+c(a.cartList.final_total),1)])])):A("",!0)])])]),_e,pe,he,be,fe],64)}const Fe=k(E,[["render",ve]]);export{Fe as default};
