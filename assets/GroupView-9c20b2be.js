import{_ as x,m as _,d as b,p as d,r as N,o as a,c as i,a as t,t as n,J as y,k as g,F as S,E as F,e as f,f as v,l as p,H as $}from"./index-d88e7fd2.js";import{h as D}from"./zh-tw-a6f00c05.js";import{c as w}from"./cartStore-109ae50d.js";import{f as C}from"./frontOrderStore-b64ce7cb.js";import{b as A}from"./bookmarkStore-b8509ebf.js";import"./Toast-ccf83d12.js";const{VITE_APP_URL:h,VITE_APP_PATH:u}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"aurora-path",BASE_URL:"/vue-learnFund/",MODE:"production",DEV:!1,PROD:!0},E={data(){return{clickItem:"",categoryData:{}}},props:["categoryName"],watch:{categoryName(){this.getCategoryData(this.categoryName)}},created(){D.locale("zh-tw")},mounted(){this.getCategoryData(this.categoryName)},computed:{..._(w,["cartList","ShowCourseList","showCheck"]),..._(C,["showFinalStuOrderData"]),..._(A,["showbookmarkData"])},methods:{...b(w,["getCartList","addToCart","checkedClass","getAllCourse"]),...b(C,["getStuOrderList","matchFundingTarget","matchStuNumAndClass"]),...b(A,["setLocalStorageBookmark","getLocalStorageBookmark","BookmarkAction"]),countLeftDay(o){return Date.parse(new Date)>o?"已":(o=new Date(o).toISOString(),D(o).fromNow())},filterData(o){console.log(o),console.log(this.categoryName),this.categoryName==="已開課課程"||this.categoryName==="募資課程"?o==="open"?this.getAllOpenData():o==="funding"&&this.getAllFundingData():d.get(`${h}/api/${u}/products?category=${this.categoryName}`).then(s=>{console.log(s),this.categoryData.products=[],o==="funding"?s.data.products.forEach(c=>{c.courseStatus==="classFunding"&&this.categoryData.products.push(c)}):o==="open"&&s.data.products.forEach(c=>{c.courseStatus==="classOpen"&&this.categoryData.products.push(c)}),console.log(this.categoryData)}).catch(s=>{console.log(s),this.$router.push("/notFound")})},getAllClassData(){d.get(`${h}/api/${u}/products/all`).then(o=>{console.log(o),this.categoryData=o.data}).catch(o=>{console.log(o)})},getAllFundingData(){d.get(`${h}/api/${u}/products/all`).then(o=>{console.log(o),this.categoryData.products=[],o.data.products.forEach(s=>{s.courseStatus==="classFunding"&&this.categoryData.products.push(s)})}).catch(o=>{console.log(o)})},getAllOpenData(){d.get(`${h}/api/${u}/products/all`).then(o=>{console.log(o),this.categoryData.products=[],o.data.products.forEach(s=>{s.courseStatus==="classOpen"&&this.categoryData.products.push(s)})}).catch(o=>{console.log(o)})},getCategoryData(o){if(console.log(o),!["語言","藝術","投資理財","攝影","商業","募資課程","已開課課程"].includes(o)){this.$router.push("/notFound");return}o==="募資課程"?this.getAllFundingData():o==="已開課課程"?this.getAllOpenData():d.get(`${h}/api/${u}/products?category=${o}`).then(c=>{console.log(c),this.categoryData=c.data}).catch(c=>{console.log(c),this.$router.push("/notFound")})}}},L={class:"full-height mb-5"},O={class:"sticky-top",style:{top:"80px","background-image":"url(./img/content-bg.png)","background-position":"center bottom"}},I={class:"container"},B={class:"pt-3",style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb"},P={class:"breadcrumb"},V=t("li",{class:"breadcrumb-item"},[t("a",{href:"#",class:"text-decoration-none text-muted"},"首頁")],-1),T={class:"breadcrumb-item active","aria-current":"page"},z={href:"#",class:"text-decoration-none text-dark"},j={class:"mb-3"},R={class:"d-flex justify-content-center mb-5 pb-3"},U={key:0,class:"container"},H={key:0,class:"row"},G=t("div",{class:"col text-center"},"查無資料",-1),J=[G],M={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-3"},q={key:0,class:"card h-100 hover-shadow"},K={class:"ratio ratio-16x9 overflow-hidden"},Q=["src"],W={class:"position-absolute top-rem-1 start-rem-1"},X={class:"badge bg-darkblue me-2"},Y=t("span",{class:"badge bg-secondary"}," 已開課",-1),Z={class:"card-body"},tt={class:"h-100 d-flex flex-column"},ot={class:"d-flex justify-content-between"},et=["onClick"],st=["onClick"],at={class:"mt-auto"},it={class:"mb-2"},nt={class:"mb-0"},ct=t("i",{class:"bi bi-book"},null,-1),lt={class:"mb-0"},rt=t("i",{class:"bi bi-card-list"},null,-1),dt={class:"text-primary fw-bold h3"},ht={class:"d-flex justify-content-between mt-2 align-items-center"},ut={class:"text-muted mb-0"},mt={key:0,href:"#/cart",type:"button",class:"btn btn-primary text-white btn-sm"},gt=["onClick"],pt={key:1,class:"card h-100 hover-shadow"},_t={class:"ratio ratio-16x9 overflow-hidden"},bt=["src"],yt={class:"position-absolute top-rem-1 start-rem-1"},kt={class:"badge bg-darkblue me-2"},ft=t("span",{class:"badge bg-white text-primary fw-bold"}," 募資中",-1),vt={class:"card-body"},Dt={class:"h-100 d-flex flex-column"},wt={class:"d-flex justify-content-between"},Ct=["onClick"],At=["onClick"],xt={key:0,class:"mt-auto"},Nt={class:"mb-0 mt-1 mb-2"},St={class:"text-primary fw-bold h3"},Ft={class:"progress",style:{height:"20px"}},$t={class:"d-flex justify-content-between"},Et={class:"mb-0 text-muted"},Lt={class:"text-muted mb-0"},Ot={class:"text-secondary fw-bolder"},It={class:"d-flex justify-content-between mt-2"},Bt={class:"text-muted mb-0"},Pt={key:0,href:"#/cart",type:"button",class:"btn btn-primary text-white btn-sm"},Vt=["onClick"];function Tt(o,s,c,zt,l,m){const k=N("RouterLink");return a(),i("div",L,[t("div",O,[t("div",I,[t("nav",B,[t("ol",P,[V,t("li",T,[t("a",z,n(c.categoryName),1)])])]),t("h3",j,n(c.categoryName),1),t("div",R,[t("button",{onClick:s[0]||(s[0]=e=>{m.getCategoryData(c.categoryName),l.clickItem="all"}),type:"button",class:y(["btn btn-outline-primary me-3 opacity-75",{active:l.clickItem==="all"}])}," 全部 ",2),t("button",{onClick:s[1]||(s[1]=e=>{m.filterData("open"),l.clickItem="open"}),type:"button",class:y(["btn btn-outline-primary me-3 opacity-75",{active:l.clickItem==="open"}])}," 已開課 ",2),t("button",{onClick:s[2]||(s[2]=e=>{m.filterData("funding"),l.clickItem="funding"}),type:"button",class:y(["btn btn-outline-primary opacity-75",{active:l.clickItem==="funding"}])}," 募資中 ",2)])])]),l.categoryData.products?(a(),i("div",U,[l.categoryData.products.length===0?(a(),i("div",H,J)):g("",!0),t("div",M,[(a(!0),i(S,null,F(l.categoryData.products,e=>(a(),i("div",{class:"col position-relative",key:e.id},[e.courseStatus==="classOpen"?(a(),i("div",q,[f(k,{to:`/course/${e.id}`,class:"text-decoration-none"},{default:v(()=>[t("div",K,[t("img",{src:e.imageUrl,class:"card-img-top img-cover img-hover-enlarge",alt:"..."},null,8,Q)]),t("div",W,[t("span",X,n(e.category),1),Y])]),_:2},1032,["to"]),t("div",Z,[t("div",tt,[t("div",ot,[t("h5",null,n(e.title),1),o.showbookmarkData.includes(e.id)?(a(),i("i",{key:0,class:"bi bi-bookmark-fill img-hover-enlarge",onClick:r=>o.BookmarkAction(e.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,et)):(a(),i("i",{key:1,class:"bi bi-bookmark img-hover-enlarge",onClick:r=>o.BookmarkAction(e.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,st))]),t("div",at,[t("div",it,[t("p",nt,[ct,p(" "+n(e.unit)+" 小時 ",1)]),t("p",lt,[rt,p(" "+n(e.classSectionNum)+" 章節 "+n(e.classUnitNum)+" 單元 ",1)])]),t("p",null,[t("del",null,"NT$ "+n(e.origin_price),1),t("span",dt," NT$ "+n(e.price),1)]),t("div",ht,[t("p",ut," 同學 "+n(o.matchStuNumAndClass(e.id))+" 人 ",1),o.showCheck.includes(e.id)?(a(),i("a",mt," 已選購，結帳去 ")):(a(),i("button",{key:1,onClick:r=>o.addToCart(e.id),class:"btn btn-outline-primary btn-sm",type:"button"}," 加入購物車 ",8,gt))])])])])])):e.courseStatus==="classFunding"?(a(),i("div",pt,[f(k,{to:`/course/${e.id}`,class:"text-decoration-none"},{default:v(()=>[t("div",_t,[t("img",{src:e.imageUrl,class:"card-img-top img-cover img-hover-enlarge",alt:"..."},null,8,bt)]),t("div",yt,[t("span",kt,n(e.category),1),ft])]),_:2},1032,["to"]),t("div",vt,[t("div",Dt,[t("div",wt,[t("h5",null,n(e.title),1),o.showbookmarkData.includes(e.id)?(a(),i("i",{key:0,class:"bi bi-bookmark-fill img-hover-enlarge",onClick:r=>o.BookmarkAction(e.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,Ct)):(a(),i("i",{key:1,class:"bi bi-bookmark img-hover-enlarge",onClick:r=>o.BookmarkAction(e.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,At))]),o.showFinalStuOrderData?(a(),i("div",xt,[t("p",Nt,[p(" 募資價 "),t("span",St," NT$ "+n(e.funding_price),1)]),t("div",Ft,[t("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100",style:$({width:o.matchFundingTarget(e.id)+"%"})},null,4)]),t("div",$t,[t("p",Et," 達標率 "+n(o.matchFundingTarget(e.id))+" % ",1),t("p",Lt,[t("span",Ot,n(m.countLeftDay(e.fundingEndDate)),1),p(" 結束 ")])]),t("div",It,[t("p",Bt," 同學 "+n(o.matchStuNumAndClass(e.id))+" 人 ",1),o.showCheck.includes(e.id)?(a(),i("a",Pt," 已選購，結帳去 ")):(a(),i("button",{key:1,onClick:r=>o.addToCart(e.id),class:"btn btn-outline-primary btn-sm",type:"button"}," 加入購物車 ",8,Vt))])])):g("",!0)])])])):g("",!0)]))),128))])])):g("",!0)])}const Mt=x(E,[["render",Tt]]);export{Mt as default};
