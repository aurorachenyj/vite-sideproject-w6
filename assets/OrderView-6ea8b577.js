import{_ as V,m as F,a as k,r as _,o as n,c as i,b as e,l as d,v as p,d as l,w as T,t as c,F as f,i as x,f as A,e as L,n as h,p as w}from"./index-6b505942.js";import{c as v}from"./cartStore-4b57ef85.js";const{VITE_APP_URL:P,VITE_APP_PATH:U}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"aurora-path",BASE_URL:"/vite-sideproject-w6/",MODE:"production",DEV:!1,PROD:!0},E={data(){return{orderForm:{user:{name:"",tel:"09",email:"",address:"免填地址",payment:"信用卡"},message:""}}},mounted(){this.getCartList()},computed:{...F(v,["cartList"])},methods:{sendOrder(){if(this.cartList.carts.length===0){alert("購物車內無商品"),this.$router.push("/courses");return}const a=this.orderForm;this.$http.post(`${P}/api/${U}/order`,{data:a}).then(s=>{const{orderId:b}=s.data;alert(s.data.message),this.$router.push(`/orderCheck/${b}`)}).catch(s=>{alert(s.response.data.message)})},...k(v,["getCartList"])}},C={class:"container mt-5"},M=e("h3",{class:"my-3 d-inline me-2"},"結帳",-1),N=e("a",{href:"#/cart",class:"badge bg-secondary text-decoration-none align-middle text-white mb-2"},[e("i",{class:"bi bi-arrow-bar-left"}),L(" 回購物車頁")],-1),S={class:"row g-4 mt-2"},D={class:"col-md-8"},O={class:"bg-light mb-3 p-3"},R=e("h5",{class:"mb-3 pb-3 border-bottom"},"付款方式",-1),B={class:"form-check"},q=e("label",{class:"form-check-label",for:"card"}," 信用卡 ",-1),I={class:"form-check"},H=e("label",{class:"form-check-label",for:"ATM"}," ATM ",-1),j={class:"form-check"},z=e("label",{class:"form-check-label",for:"store"}," 超商付款 ",-1),G={class:"bg-light p-3"},J=e("h5",{class:"mb-3 pb-3 border-bottom"},"資料填寫",-1),K={class:"mb-3"},Q=e("label",{for:"user",class:"form-label"},"姓名",-1),W={class:"mb-3"},X=e("label",{for:"phone",class:"form-label"},"手機",-1),Y={class:"mb-3"},Z=e("label",{for:"user",class:"form-label"},"聯絡信箱",-1),$={class:"mb-3"},ee=e("label",{for:"message",class:"form-label"},"留言",-1),se=e("div",{class:"text-center"},[e("button",{type:"submit",class:"btn btn-outline-primary w-50"}," 送出訂單 ")],-1),oe={class:"col-md-4"},te={key:0},re={class:"bg-light p-3"},le=e("h5",{class:"text-center border-bottom py-3"},"訂單明細",-1),ae={class:"d-inline"},ne={class:"py-3 list-unstyled"},ie={class:"mb-1"},de={class:"text-end mb-1"},ce=e("p",{class:"d-inline"},"總計",-1),me={class:"text-primary text-end"},ue=e("br",null,null,-1),_e=e("br",null,null,-1),pe=e("br",null,null,-1),he=e("br",null,null,-1),be=e("br",null,null,-1);function fe(a,s,b,ve,o,y){const m=_("v-field"),u=_("error-message"),g=_("v-form");return n(),i(f,null,[e("div",C,[M,N,e("div",S,[e("div",D,[e("div",O,[R,e("div",B,[d(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>o.orderForm.user.payment=t),value:"信用卡",class:"form-check-input",type:"radio",name:"payment",id:"card"},null,512),[[p,o.orderForm.user.payment]]),q]),e("div",I,[d(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>o.orderForm.user.payment=t),value:"ATM",class:"form-check-input",type:"radio",name:"payment",id:"ATM"},null,512),[[p,o.orderForm.user.payment]]),H]),e("div",j,[d(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>o.orderForm.user.payment=t),value:"超商付款",class:"form-check-input",type:"radio",name:"payment",id:"store"},null,512),[[p,o.orderForm.user.payment]]),z])]),e("div",G,[J,l(g,{class:"",onSubmit:y.sendOrder},{default:T(({errors:t})=>[e("div",K,[Q,l(m,{name:"姓名",modelValue:o.orderForm.user.name,"onUpdate:modelValue":s[3]||(s[3]=r=>o.orderForm.user.name=r),class:h([{"is-invalid":t.姓名},"form-control"]),id:"user",type:"text",placeholder:"請輸入真實姓名",rules:"required|min:2"},null,8,["modelValue","class"]),l(u,{name:"姓名",class:"invalid-feedback"})]),e("div",W,[X,l(m,{name:"手機號碼",modelValue:o.orderForm.user.tel,"onUpdate:modelValue":s[4]||(s[4]=r=>o.orderForm.user.tel=r),class:h([{"is-invalid":t.手機號碼},"form-control"]),id:"phone",type:"tel",placeholder:"請輸入手機號碼",rules:"required|numeric|min:9"},null,8,["modelValue","class"]),l(u,{name:"手機號碼",class:"invalid-feedback"})]),e("div",Y,[Z,l(m,{name:"信箱",modelValue:o.orderForm.user.email,"onUpdate:modelValue":s[5]||(s[5]=r=>o.orderForm.user.email=r),class:h([{"is-invalid":t.信箱},"form-control"]),id:"user",type:"email",placeholder:"請輸入信箱",rules:"required|email"},null,8,["modelValue","class"]),l(u,{name:"信箱",class:"invalid-feedback"})]),e("div",$,[ee,d(e("textarea",{"onUpdate:modelValue":s[6]||(s[6]=r=>o.orderForm.message=r),class:"form-control",id:"message",placeholder:"選填",rows:"3"},null,512),[[w,o.orderForm.message]])]),se]),_:1},8,["onSubmit"])])]),e("div",oe,[a.cartList.carts?(n(),i("div",te,[e("div",re,[le,e("p",ae,"購買列表 ("+c(a.cartList.carts.length)+")",1),e("ul",ne,[(n(!0),i(f,null,x(a.cartList.carts,t=>(n(),i("li",{key:t.id,class:"border-bottom rounded-3 p-2 bg-white"},[e("p",ie,c(t.product.title),1),e("p",de,"NT$ "+c(t.final_total),1)]))),128))]),ce,e("h4",me," NT$ "+c(a.cartList.final_total),1)])])):A("",!0)])])]),ue,_e,pe,he,be],64)}const Ve=V(E,[["render",fe]]);export{Ve as default};
