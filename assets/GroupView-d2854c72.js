import{_ as x,m as _,d as b,n as d,r as v,o as a,c as i,a as t,e as y,t as n,I as k,j as g,F as L,D as $,f as D,k as p,G as F}from"./index-1873f96c.js";import{h as w}from"./zh-tw-a6f00c05.js";import{c as C}from"./cartStore-856056c6.js";import{f as A}from"./frontOrderStore-3e0dfa12.js";import{b as N}from"./bookmarkStore-0c31018b.js";import"./Toast-bce8a41a.js";const{VITE_APP_URL:h,VITE_APP_PATH:u}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"aurora-path",BASE_URL:"/vite-sideproject-w6/",MODE:"production",DEV:!1,PROD:!0},I={data(){return{clickItem:"",categoryData:{}}},props:["categoryName"],watch:{categoryName(){this.getCategoryData(this.categoryName)}},created(){w.locale("zh-tw")},mounted(){this.getCategoryData(this.categoryName)},computed:{..._(C,["cartList","ShowCourseList","showCheck"]),..._(A,["showFinalStuOrderData"]),..._(N,["showbookmarkData"])},methods:{...b(C,["getCartList","addToCart","checkedClass","getAllCourse"]),...b(A,["getStuOrderList","matchFundingTarget","matchStuNumAndClass"]),...b(N,["setLocalStorageBookmark","getLocalStorageBookmark","BookmarkAction"]),countLeftDay(o){return Date.parse(new Date)>o?"已":(o=new Date(o).toISOString(),w(o).fromNow())},filterData(o){console.log(o),console.log(this.categoryName),this.categoryName==="已開課課程"||this.categoryName==="募資課程"?o==="open"?this.getAllOpenData():o==="funding"&&this.getAllFundingData():d.get(`${h}/api/${u}/products?category=${this.categoryName}`).then(s=>{console.log(s),this.categoryData.products=[],o==="funding"?s.data.products.forEach(c=>{c.courseStatus==="classFunding"&&this.categoryData.products.push(c)}):o==="open"&&s.data.products.forEach(c=>{c.courseStatus==="classOpen"&&this.categoryData.products.push(c)}),console.log(this.categoryData)}).catch(s=>{console.log(s),this.$router.push("/notFound")})},getAllClassData(){d.get(`${h}/api/${u}/products/all`).then(o=>{console.log(o),this.categoryData=o.data}).catch(o=>{console.log(o)})},getAllFundingData(){d.get(`${h}/api/${u}/products/all`).then(o=>{console.log(o),this.categoryData.products=[],o.data.products.forEach(s=>{s.courseStatus==="classFunding"&&this.categoryData.products.push(s)})}).catch(o=>{console.log(o)})},getAllOpenData(){d.get(`${h}/api/${u}/products/all`).then(o=>{console.log(o),this.categoryData.products=[],o.data.products.forEach(s=>{s.courseStatus==="classOpen"&&this.categoryData.products.push(s)})}).catch(o=>{console.log(o)})},getCategoryData(o){if(console.log(o),!["語言","藝術","投資理財","攝影","商業","募資課程","已開課課程"].includes(o)){this.$router.push("/notFound");return}o==="募資課程"?this.getAllFundingData():o==="已開課課程"?this.getAllOpenData():d.get(`${h}/api/${u}/products?category=${o}`).then(c=>{console.log(c),this.categoryData=c.data}).catch(c=>{console.log(c),this.$router.push("/notFound")})}}},E={class:"full-height mb-5"},O={class:"sticky-top",style:{top:"80px","background-image":"url(./img/content-bg.png)","background-position":"center bottom"}},V={class:"container"},B={class:"pt-3",style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb"},P={class:"breadcrumb"},T=t("li",{class:"breadcrumb-item"},[t("a",{href:"#",class:"text-decoration-none text-muted"},"首頁")],-1),j={class:"breadcrumb-item active","aria-current":"page"},z={href:"#",class:"text-decoration-none text-dark"},U={class:"mb-3"},R={class:"d-flex justify-content-center mb-5 pb-3"},G={key:0,class:"container"},H={key:0,class:"row"},M=t("div",{class:"col text-center"},"查無資料",-1),q=[M],J={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-3"},K={key:0,class:"card h-100 hover-shadow"},Q={class:"ratio ratio-16x9 overflow-hidden"},W=["src"],X={class:"position-absolute top-rem-1 start-rem-1"},Y={class:"badge bg-darkblue me-2"},Z=t("span",{class:"badge bg-secondary"}," 已開課",-1),tt={class:"card-body"},ot={class:"h-100 d-flex flex-column"},et={class:"d-flex justify-content-between"},st=["onClick"],at=["onClick"],it={class:"mt-auto"},nt={class:"mb-2"},ct={class:"mb-0"},lt=t("i",{class:"bi bi-book"},null,-1),rt={class:"mb-0"},dt=t("i",{class:"bi bi-card-list"},null,-1),ht={class:"text-primary fw-bold h3"},ut={class:"d-flex justify-content-between mt-2 align-items-center"},mt={class:"text-muted mb-0"},gt={key:0,href:"#/cart",type:"button",class:"btn btn-primary text-white btn-sm"},pt=["disabled","onClick"],_t={key:1,class:"card h-100 hover-shadow"},bt={class:"ratio ratio-16x9 overflow-hidden"},yt=["src"],kt={class:"position-absolute top-rem-1 start-rem-1"},ft={class:"badge bg-darkblue me-2"},vt=t("span",{class:"badge bg-white text-primary fw-bold"}," 募資中",-1),Dt={class:"card-body"},wt={class:"h-100 d-flex flex-column"},Ct={class:"d-flex justify-content-between"},At=["onClick"],Nt=["onClick"],St={key:0,class:"mt-auto"},xt={class:"mb-0 mt-1 mb-2"},Lt={class:"text-primary fw-bold h3"},$t={class:"progress",style:{height:"20px"}},Ft={class:"d-flex justify-content-between"},It={class:"mb-0 text-muted"},Et={class:"text-muted mb-0"},Ot={class:"text-secondary fw-bolder"},Vt={class:"d-flex justify-content-between mt-2"},Bt={class:"text-muted mb-0"},Pt={key:0,href:"#/cart",type:"button",class:"btn btn-primary text-white btn-sm"},Tt=["onClick"];function jt(o,s,c,zt,l,m){const S=v("LoadingVue"),f=v("RouterLink");return a(),i("div",E,[t("div",O,[t("div",V,[y(S,{active:o.isLoading,"onUpdate:active":s[0]||(s[0]=e=>o.isLoading=e)},null,8,["active"]),t("nav",B,[t("ol",P,[T,t("li",j,[t("a",z,n(c.categoryName),1)])])]),t("h3",U,n(c.categoryName),1),t("div",R,[t("button",{onClick:s[1]||(s[1]=e=>{m.getCategoryData(c.categoryName),l.clickItem="all"}),type:"button",class:k(["btn btn-outline-primary me-3 opacity-75",{active:l.clickItem==="all"}])}," 全部 ",2),t("button",{onClick:s[2]||(s[2]=e=>{m.filterData("open"),l.clickItem="open"}),type:"button",class:k(["btn btn-outline-primary me-3 opacity-75",{active:l.clickItem==="open"}])}," 已開課 ",2),t("button",{onClick:s[3]||(s[3]=e=>{m.filterData("funding"),l.clickItem="funding"}),type:"button",class:k(["btn btn-outline-primary opacity-75",{active:l.clickItem==="funding"}])}," 募資中 ",2)])])]),l.categoryData.products?(a(),i("div",G,[l.categoryData.products.length===0?(a(),i("div",H,q)):g("",!0),t("div",J,[(a(!0),i(L,null,$(l.categoryData.products,e=>(a(),i("div",{class:"col position-relative",key:e.id},[e.courseStatus==="classOpen"?(a(),i("div",K,[y(f,{to:`/course/${e.id}`,class:"text-decoration-none"},{default:D(()=>[t("div",Q,[t("img",{src:e.imageUrl,class:"card-img-top img-cover img-hover-enlarge",alt:"..."},null,8,W)]),t("div",X,[t("span",Y,n(e.category),1),Z])]),_:2},1032,["to"]),t("div",tt,[t("div",ot,[t("div",et,[t("h5",null,n(e.title),1),o.showbookmarkData.includes(e.id)?(a(),i("i",{key:0,class:"bi bi-bookmark-fill img-hover-enlarge",onClick:r=>o.BookmarkAction(e.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,st)):(a(),i("i",{key:1,class:"bi bi-bookmark img-hover-enlarge",onClick:r=>o.BookmarkAction(e.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,at))]),t("div",it,[t("div",nt,[t("p",ct,[lt,p(" "+n(e.unit)+" 小時 ",1)]),t("p",rt,[dt,p(" "+n(e.classSectionNum)+" 章節 "+n(e.classUnitNum)+" 單元 ",1)])]),t("p",null,[t("del",null,"NT$ "+n(e.origin_price),1),t("span",ht," NT$ "+n(e.price),1)]),t("div",ut,[t("p",mt," 同學 "+n(o.matchStuNumAndClass(e.id))+" 人 ",1),o.showCheck.includes(e.id)?(a(),i("a",gt," 已選購，結帳去 ")):(a(),i("button",{key:1,disabled:o.sendLoadItem===!0,onClick:r=>o.addToCart(e.id),class:"btn btn-outline-primary btn-sm"}," 加入購物車 ",8,pt))])])])])])):e.courseStatus==="classFunding"?(a(),i("div",_t,[y(f,{to:`/course/${e.id}`,class:"text-decoration-none"},{default:D(()=>[t("div",bt,[t("img",{src:e.imageUrl,class:"card-img-top img-cover img-hover-enlarge",alt:"..."},null,8,yt)]),t("div",kt,[t("span",ft,n(e.category),1),vt])]),_:2},1032,["to"]),t("div",Dt,[t("div",wt,[t("div",Ct,[t("h5",null,n(e.title),1),o.showbookmarkData.includes(e.id)?(a(),i("i",{key:0,class:"bi bi-bookmark-fill img-hover-enlarge",onClick:r=>o.BookmarkAction(e.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,At)):(a(),i("i",{key:1,class:"bi bi-bookmark img-hover-enlarge",onClick:r=>o.BookmarkAction(e.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,Nt))]),o.showFinalStuOrderData?(a(),i("div",St,[t("p",xt,[p(" 募資價 "),t("span",Lt," NT$ "+n(e.funding_price),1)]),t("div",$t,[t("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100",style:F({width:o.matchFundingTarget(e.id)+"%"})},null,4)]),t("div",Ft,[t("p",It," 達標率 "+n(o.matchFundingTarget(e.id))+" % ",1),t("p",Et,[t("span",Ot,n(m.countLeftDay(e.fundingEndDate)),1),p(" 結束 ")])]),t("div",Vt,[t("p",Bt," 同學 "+n(o.matchStuNumAndClass(e.id))+" 人 ",1),o.showCheck.includes(e.id)?(a(),i("a",Pt," 已選購，結帳去 ")):(a(),i("button",{key:1,onClick:r=>o.addToCart(e.id),class:"btn btn-outline-primary btn-sm"}," 加入購物車 ",8,Tt))])])):g("",!0)])])])):g("",!0)]))),128))])])):g("",!0)])}const Jt=x(I,[["render",jt]]);export{Jt as default};
