import{T as i}from"./Toast-2b6f39cd.js";import{_ as h,r as l,o as f,c as v,a as s,e as a,f as b,J as u}from"./index-264315fb.js";const{VITE_APP_URL:x}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"aurora-path",BASE_URL:"/vue-learnFund/",MODE:"production",DEV:!1,PROD:!0},V={data(){return{user:{username:"",password:""}}},mounted(){},methods:{adminLogin(){if(this.user.username===""||this.user.password===""){i.fire({icon:"error",title:"請填寫完整"});return}this.$http.post(`${x}/admin/signin`,this.user).then(o=>{const{token:e,expired:t}=o.data;document.cookie=`hexToken=${e}; expires=${new Date(t)}`,i.fire({icon:"success",title:o.data.message}),this.goToAdminIndex()}).catch(o=>{var e,t;i.fire({icon:"error",title:(t=(e=o.response)==null?void 0:e.data)==null?void 0:t.message}),this.user={username:"",password:""}})},goToAdminIndex(){this.$router.push("/admin/index")}}},w={class:"container mt-5 full-height"},g={class:"w-50 mx-auto"},T=s("h3",{class:"text-center mb-5"},"後台登入",-1),A={class:"mb-3"},P=s("label",{for:"email",class:"form-label"},"帳號*",-1),k={class:"mb-3"},E=s("label",{for:"password",class:"form-label"},"密碼*",-1),L=s("div",{class:"text-center"},[s("button",{class:"btn btn-outline-primary",type:"submit"},"登入")],-1);function I(o,e,t,U,n,p){const d=l("v-field"),c=l("error-message"),_=l("v-form");return f(),v("div",w,[s("div",g,[T,a(_,{onSubmit:p.adminLogin},{default:b(({errors:m})=>[s("div",A,[P,a(d,{name:"信箱",modelValue:n.user.username,"onUpdate:modelValue":e[0]||(e[0]=r=>n.user.username=r),class:u([{"is-invalid":m.信箱},"form-control"]),id:"email",type:"text",placeholder:"請輸入信箱",rules:"required|email"},null,8,["modelValue","class"]),a(c,{name:"信箱",class:"invalid-feedback"})]),s("div",k,[E,a(d,{name:"密碼",modelValue:n.user.password,"onUpdate:modelValue":e[1]||(e[1]=r=>n.user.password=r),class:u([{"is-invalid":m.密碼},"form-control"]),id:"password",type:"password",placeholder:"請輸入密碼",rules:"required|min:8",required:""},null,8,["modelValue","class"]),a(c,{name:"密碼",class:"invalid-feedback"})]),L]),_:1},8,["onSubmit"])])])}const D=h(V,[["render",I]]);export{D as default};
