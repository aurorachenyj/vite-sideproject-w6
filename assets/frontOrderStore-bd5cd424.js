import{j as f,k as u,p as g}from"./index-2600c001.js";import"./Toast-10b4191b.js";const{VITE_APP_URL:l,VITE_APP_PATH:i}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"aurora-path",BASE_URL:"/vite-sideproject-w6/",MODE:"production",DEV:!1,PROD:!0},S=f("frontOrderStore",{state:()=>({totalStuOrderList:[],finalStuOrderData:[]}),mounted(){},actions:{getStuOrderList(){this.totalStuOrderList=[],u.get(`${l}/api/${i}/orders`).then(t=>{const s=t.data.pagination.total_pages,r=[];for(let a=1;a<=s;a++)r.push(a);const c=r.map(a=>u.get(`${l}/api/${i}/orders?page=${a}`));Promise.all(c).then(a=>{a.forEach(e=>{this.totalStuOrderList.push(...e.data.orders)});const d=[...g(this.totalStuOrderList)].map(e=>Object.values(e.products)).flat().map(e=>({classId:e.product.id,classTitle:e.product.title,classPrice:e.product.price,classFundingPrice:e.product.funding_price,classfundingTarget:e.product.funding_target})),n=Object.values(d.reduce((e,o)=>(e[o.classId]?e[o.classId].stuNum+=1:e[o.classId]={...o,stuNum:1},e),{}));console.log(n),this.finalStuOrderData=n}).catch(a=>{console.log(a)})}).catch(t=>{console.log(t)})},matchFundingTarget(t){console.log(t),console.log(this.finalStuOrderData);let s=null;return this.finalStuOrderData.find(r=>{if(r.classId===t)return s=Math.round(r.stuNum*r.classFundingPrice/r.classfundingTarget*100),!0;s=0}),s},matchFundingMoney(t){console.log(t),console.log(this.finalStuOrderData);let s=null;return this.finalStuOrderData.find(r=>{if(r.classId===t)return s=r.stuNum*r.classFundingPrice,!0;s=0}),s},matchStuNumAndClass(t){console.log(t),console.log(this.finalStuOrderData);let s=null;return this.finalStuOrderData.find(r=>{if(r.classId===t)return s=r.stuNum,!0;s=0}),s}},getters:{showFinalStuOrderData:({finalStuOrderData:t})=>t}});export{S as f};
