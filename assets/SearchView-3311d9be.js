import{_ as v,m as l,d as h,n as C,r as D,o as a,c as i,a as t,t as o,k as c,F as S,D as x,j as m,e as k,f as p,G as A}from"./index-08966c63.js";import{h as b}from"./zh-tw-a6f00c05.js";import{c as u}from"./cartStore-0304ee62.js";import{f as g}from"./frontOrderStore-439a1d37.js";import{b as y}from"./bookmarkStore-55f0d1e5.js";import"./Toast-389aab69.js";const{VITE_APP_URL:N,VITE_APP_PATH:L}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"aurora-path",BASE_URL:"/vite-sideproject-w6/",MODE:"production",DEV:!1,PROD:!0},T={data(){return{searchData:[],keyword:""}},props:["keywordName"],beforeRouteUpdate(e,n){console.log(e.params.keyword),this.keyword=e.params.keyword},mounted(){this.keyword=this.keywordName,this.matchSearchKeyword()},created(){b.locale("zh-tw")},watch:{keyword(){this.matchSearchKeyword()}},computed:{...l(u,["cartList","ShowCourseList","showCheck"]),...l(g,["showFinalStuOrderData"]),...l(y,["showbookmarkData"])},methods:{...h(u,["getCartList","addToCart","checkedClass","getAllCourse"]),...h(g,["getStuOrderList","matchFundingTarget","matchStuNumAndClass"]),...h(y,["setLocalStorageBookmark","getLocalStorageBookmark","BookmarkAction"]),matchSearchKeyword(){C.get(`${N}/api/${L}/products/all`).then(e=>{this.searchData=[],e.data.products.forEach(n=>{(n.content.includes(this.keyword)||n.description.includes(this.keyword)||n.title.includes(this.keyword)||n.category.includes(this.keyword))&&this.searchData.push(n)})}).catch(e=>{console.log(e)})},countLeftDay(e){return Date.parse(new Date)>e?"已":(e=new Date(e).toISOString(),b(e).fromNow())}}},$={class:"full-height mb-5"},B={class:"container mt-5"},P={class:"h5"},E={class:"text-primary fw-bold h4"},V={key:0,class:"container mt-5"},F={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-3"},O={key:0,class:"card h-100 hover-shadow"},j={class:"ratio ratio-16x9 overflow-hidden"},R=["src"],U={class:"position-absolute top-rem-1 start-rem-1"},z={class:"badge bg-darkblue me-2"},I=t("span",{class:"badge bg-secondary"}," 已開課",-1),K={class:"card-body"},H={class:"h-100 d-flex flex-column"},G={class:"d-flex justify-content-between"},M=["onClick"],q=["onClick"],J={class:"mt-auto"},Q={class:"mb-2"},W={class:"mb-0"},X=t("i",{class:"bi bi-book"},null,-1),Y={class:"mb-0"},Z=t("i",{class:"bi bi-card-list"},null,-1),tt={class:"text-primary fw-bold h3"},st={class:"d-flex justify-content-between mt-2 align-items-center"},et={class:"text-muted mb-0"},ot={key:0,href:"#/cart",type:"button",class:"btn btn-primary text-white btn-sm"},at=["disabled","onClick"],it={key:1,class:"card h-100 hover-shadow"},nt={class:"ratio ratio-16x9 overflow-hidden"},rt=["src"],ct={class:"position-absolute top-rem-1 start-rem-1"},dt={class:"badge bg-darkblue me-2"},lt=t("span",{class:"badge bg-white text-primary fw-bold"}," 募資中",-1),ht={class:"card-body"},mt={class:"h-100 d-flex flex-column"},_t={class:"d-flex justify-content-between"},kt=["onClick"],pt=["onClick"],bt={key:0,class:"mt-auto"},ut={class:"mb-0 mt-1 mb-2"},gt={class:"text-primary fw-bold h3"},yt={class:"progress",style:{height:"20px"}},wt={class:"d-flex justify-content-between"},ft={class:"mb-0 text-muted"},vt={class:"text-muted mb-0"},Ct={class:"text-secondary fw-bolder"},Dt={class:"d-flex justify-content-between mt-2"},St={class:"text-muted mb-0"},xt={key:0,href:"#/cart",type:"button",class:"btn btn-primary text-white btn-sm"},At=["onClick"];function Nt(e,n,w,Lt,d,f){const _=D("RouterLink");return a(),i("div",$,[t("div",B,[t("p",P,[t("span",E,o(w.keywordName),1),c(" 的搜尋結果，共 "+o(d.searchData.length)+" 筆 ",1)])]),d.searchData?(a(),i("div",V,[t("div",F,[(a(!0),i(S,null,x(d.searchData,s=>(a(),i("div",{class:"col position-relative",key:s.id},[s.courseStatus==="classOpen"?(a(),i("div",O,[k(_,{to:`/course/${s.id}`,class:"text-decoration-none"},{default:p(()=>[t("div",j,[t("img",{src:s.imageUrl,class:"card-img-top img-cover img-hover-enlarge",alt:"..."},null,8,R)]),t("div",U,[t("span",z,o(s.category),1),I])]),_:2},1032,["to"]),t("div",K,[t("div",H,[t("div",G,[t("h5",null,o(s.title),1),e.showbookmarkData.includes(s.id)?(a(),i("i",{key:0,class:"bi bi-bookmark-fill img-hover-enlarge",onClick:r=>e.BookmarkAction(s.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,M)):(a(),i("i",{key:1,class:"bi bi-bookmark img-hover-enlarge",onClick:r=>e.BookmarkAction(s.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,q))]),t("div",J,[t("div",Q,[t("p",W,[X,c(" "+o(s.unit)+" 小時 ",1)]),t("p",Y,[Z,c(" "+o(s.classSectionNum)+" 章節 "+o(s.classUnitNum)+" 單元 ",1)])]),t("p",null,[t("del",null,"NT$ "+o(s.origin_price),1),t("span",tt," NT$ "+o(s.price),1)]),t("div",st,[t("p",et," 同學 "+o(e.matchStuNumAndClass(s.id))+" 人 ",1),e.showCheck.includes(s.id)?(a(),i("a",ot," 已選購，結帳去 ")):(a(),i("button",{key:1,disabled:e.sendLoadItem===!0,onClick:r=>e.addToCart(s.id),class:"btn btn-outline-primary btn-sm"}," 加入購物車 ",8,at))])])])])])):s.courseStatus==="classFunding"?(a(),i("div",it,[k(_,{to:`/course/${s.id}`,class:"text-decoration-none"},{default:p(()=>[t("div",nt,[t("img",{src:s.imageUrl,class:"card-img-top img-cover img-hover-enlarge",alt:"..."},null,8,rt)]),t("div",ct,[t("span",dt,o(s.category),1),lt])]),_:2},1032,["to"]),t("div",ht,[t("div",mt,[t("div",_t,[t("h5",null,o(s.title),1),e.showbookmarkData.includes(s.id)?(a(),i("i",{key:0,class:"bi bi-bookmark-fill img-hover-enlarge",onClick:r=>e.BookmarkAction(s.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,kt)):(a(),i("i",{key:1,class:"bi bi-bookmark img-hover-enlarge",onClick:r=>e.BookmarkAction(s.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,pt))]),e.showFinalStuOrderData?(a(),i("div",bt,[t("p",ut,[c(" 募資價 "),t("span",gt," NT$ "+o(s.funding_price),1)]),t("div",yt,[t("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100",style:A({width:e.matchFundingTarget(s.id)+"%"})},null,4)]),t("div",wt,[t("p",ft," 達標率 "+o(e.matchFundingTarget(s.id))+" % ",1),t("p",vt,[t("span",Ct,o(f.countLeftDay(s.fundingEndDate)),1),c(" 結束 ")])]),t("div",Dt,[t("p",St," 同學 "+o(e.matchStuNumAndClass(s.id))+" 人 ",1),e.showCheck.includes(s.id)?(a(),i("a",xt," 已選購，結帳去 ")):(a(),i("button",{key:1,onClick:r=>e.addToCart(s.id),class:"btn btn-outline-primary btn-sm"}," 加入購物車 ",8,At))])])):m("",!0)])])])):m("",!0)]))),128))])])):m("",!0)])}const Ft=v(T,[["render",Nt]]);export{Ft as default};
