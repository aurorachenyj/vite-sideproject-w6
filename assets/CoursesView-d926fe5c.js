import{T as d}from"./Toast-835f3f23.js";import{c as _}from"./cartStore-39730e1c.js";import{_ as b,m as f,a as L,r as v,o as a,c,b as t,d as C,F as u,j as k,t as l}from"./index-c26ca672.js";const{VITE_APP_URL:p,VITE_APP_PATH:g}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"aurora-path",BASE_URL:"/vite-sideproject-w6/",MODE:"production",DEV:!1,PROD:!0},T={data(){return{loadItem:!1,isLoading:!1,courseList:[],check:[]}},mounted(){this.getAllCourse()},computed:{...f(_,["cartList"])},watch:{courseList(){this.getCartList()},cartList(){this.checkedClass()}},methods:{...L(_,["getCartList"]),checkedClass(){this.courseList.forEach(e=>{this.cartList.carts.forEach(o=>{e.id===o.product_id&&this.check.push(e.id)})})},getAllCourse(){this.isLoading=!0,this.$http.get(`${p}/api/${g}/products/all`).then(e=>{this.isLoading=!1,this.courseList=e.data.products}).catch(e=>{d.fire({icon:"success",title:e.response.data.message})})},goToClassPage(e){this.$router.push(`/course/${e}`)},addToCart(e){this.loadItem=!0;const o={product_id:e,qty:1};this.$http.post(`${p}/api/${g}/cart`,{data:o}).then(n=>{this.getAllCourse(),this.loadItem=!1,d.fire({icon:"success",title:n.data.message})}).catch(n=>{d.fire({icon:"error",title:n.response.data.message})})}}},P={class:"container"},y=t("h3",{class:"my-3"},"全部課程總覽",-1),A={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"},w={class:"card"},E=["onClick"],V=["src"],$={class:"badge bg-dark position-absolute top-rem-1 start-rem-1"},I={class:"card-body"},x={class:"card-title"},B={class:"card-text"},U={class:"text-end"},D={class:"fs-6"},N={class:"fw-bold"},R={class:"btn-group w-100",role:"group","aria-label":"Basic outlined example"},S=["onClick"],j={key:0,href:"#/cart",type:"button",class:"btn btn-primary link-light"},F=["onClick","disabled"],H=t("br",null,null,-1),O=t("br",null,null,-1),q=t("br",null,null,-1),M=t("br",null,null,-1),z=t("br",null,null,-1);function G(e,o,n,J,i,r){const m=v("LoadingVue");return a(),c(u,null,[t("div",P,[C(m,{active:i.isLoading,"onUpdate:active":o[0]||(o[0]=s=>i.isLoading=s)},null,8,["active"]),y,t("div",A,[(a(!0),c(u,null,k(i.courseList,s=>(a(),c("div",{class:"col",key:s.id},[t("div",w,[t("a",{class:"overflow-hidden",onClick:h=>r.goToClassPage(s.id)},[t("img",{src:s.imageUrl,height:"250",class:"card-img-top img-cover img-hover-enlarge",alt:"..."},null,8,V)],8,E),t("span",$,l(s.category),1),t("div",I,[t("h5",x,l(s.title),1),t("p",B,l(s.content),1),t("h4",U,[t("span",D,[t("del",null," NT$ "+l(s.origin_price),1)]),t("span",N," NT$ "+l(s.price),1)]),t("div",R,[t("a",{onClick:h=>r.goToClassPage(s.id),class:"btn btn-outline-secondary btn-hover-light"},"課程詳情",8,S),i.check.includes(s.id)?(a(),c("a",j," 已選購，結帳去 ")):(a(),c("button",{key:1,onClick:h=>r.addToCart(s.id),disabled:i.loadItem,type:"button",class:"btn btn-outline-primary"}," 加入購物車 ",8,F))])])])]))),128))])]),H,O,q,M,z],64)}const X=b(T,[["render",G]]);export{X as default};
