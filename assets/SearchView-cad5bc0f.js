import{_ as v,m as d,d as h,n as C,r as S,o as a,c as i,a as t,t as o,k as c,F as D,D as x,j as m,e as u,f as p,G as A}from"./index-8ab29a44.js";import{h as k}from"./zh-tw-a6f00c05.js";import{c as b}from"./cartStore-7c0f204d.js";import{f as g}from"./frontOrderStore-1a191e2e.js";import{b as y}from"./bookmarkStore-9eef7024.js";import"./Toast-6cabf889.js";const{VITE_APP_URL:N,VITE_APP_PATH:L}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"aurora-path",BASE_URL:"/vue-learnFund/",MODE:"production",DEV:!1,PROD:!0},T={data(){return{searchData:[],keyword:""}},props:["keywordName"],beforeRouteUpdate(e){this.keyword=e.params.keyword},mounted(){this.keyword=this.keywordName,this.matchSearchKeyword()},created(){k.locale("zh-tw")},watch:{keyword(){this.matchSearchKeyword()},searchData(){this.getStuOrderList(),this.matchFundingTarget(),this.matchStuNumAndClass()}},computed:{...d(b,["cartList","ShowCourseList","showCheck"]),...d(g,["showFinalStuOrderData"]),...d(y,["showbookmarkData"])},methods:{...h(b,["getCartList","addToCart","checkedClass","getAllCourse"]),...h(g,["getStuOrderList","matchFundingTarget","matchStuNumAndClass"]),...h(y,["setLocalStorageBookmark","getLocalStorageBookmark","BookmarkAction"]),matchSearchKeyword(){C.get(`${N}/api/${L}/products/all`).then(e=>{this.searchData=[],e.data.products.forEach(n=>{(n.content.includes(this.keyword)||n.description.includes(this.keyword)||n.title.includes(this.keyword)||n.category.includes(this.keyword))&&this.searchData.push(n)})}).catch(e=>{console.log(e)})},countLeftDay(e){return Date.parse(new Date)>e?"已":(e=new Date(e).toISOString(),k(e).fromNow())}}},$={class:"full-height mb-5"},B={class:"container mt-5"},P={class:"h5"},E={class:"text-primary fw-bold h4"},F={key:0,class:"container mt-5"},V={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-3"},O={key:0,class:"card h-100 hover-shadow"},R={class:"ratio ratio-16x9 overflow-hidden"},U=["src","alt"],j={class:"position-absolute top-rem-1 start-rem-1"},z={class:"badge bg-darkblue me-2"},I=t("span",{class:"badge bg-secondary"}," 已開課",-1),K={class:"card-body"},H={class:"h-100 d-flex flex-column"},G={class:"d-flex justify-content-between"},M=["onClick"],q=["onClick"],J={class:"mt-auto"},Q={class:"mb-2"},W={class:"mb-0"},X=t("i",{class:"bi bi-book"},null,-1),Y={class:"mb-0"},Z=t("i",{class:"bi bi-card-list"},null,-1),tt={class:"text-primary fw-bold h3"},st={class:"d-flex justify-content-between mt-2 align-items-center"},et={class:"text-muted mb-0"},ot={key:0,href:"#/cart",type:"button",class:"btn btn-primary text-white btn-sm"},at=["onClick"],it={key:1,class:"card h-100 hover-shadow"},nt={class:"ratio ratio-16x9 overflow-hidden"},rt=["src","alt"],ct={class:"position-absolute top-rem-1 start-rem-1"},lt={class:"badge bg-darkblue me-2"},dt=t("span",{class:"badge bg-white text-primary fw-bold"}," 募資中",-1),ht={class:"card-body"},mt={class:"h-100 d-flex flex-column"},_t={class:"d-flex justify-content-between"},ut=["onClick"],pt=["onClick"],kt={key:0,class:"mt-auto"},bt={class:"mb-0 mt-1 mb-2"},gt={class:"text-primary fw-bold h3"},yt={class:"progress",style:{height:"20px"}},ft={class:"d-flex justify-content-between"},wt={class:"mb-0 text-muted"},vt={class:"text-muted mb-0"},Ct={class:"text-secondary fw-bolder"},St={class:"d-flex justify-content-between mt-2"},Dt={class:"text-muted mb-0"},xt={key:0,href:"#/cart",type:"button",class:"btn btn-primary text-white btn-sm"},At=["onClick"];function Nt(e,n,f,Lt,l,w){const _=S("RouterLink");return a(),i("div",$,[t("div",B,[t("p",P,[t("span",E,o(f.keywordName),1),c(" 的搜尋結果，共 "+o(l.searchData.length)+" 筆 ",1)])]),l.searchData?(a(),i("div",F,[t("div",V,[(a(!0),i(D,null,x(l.searchData,s=>(a(),i("div",{class:"col position-relative",key:s.id},[s.courseStatus==="classOpen"?(a(),i("div",O,[u(_,{to:`/course/${s.id}`,class:"text-decoration-none"},{default:p(()=>[t("div",R,[t("img",{src:s.imageUrl,class:"card-img-top img-cover img-hover-enlarge",alt:s.title},null,8,U)]),t("div",j,[t("span",z,o(s.category),1),I])]),_:2},1032,["to"]),t("div",K,[t("div",H,[t("div",G,[t("h5",null,o(s.title),1),e.showbookmarkData.includes(s.id)?(a(),i("i",{key:0,class:"bi bi-bookmark-fill img-hover-enlarge",onClick:r=>e.BookmarkAction(s.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,M)):(a(),i("i",{key:1,class:"bi bi-bookmark img-hover-enlarge",onClick:r=>e.BookmarkAction(s.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,q))]),t("div",J,[t("div",Q,[t("p",W,[X,c(" "+o(s.unit)+" 小時 ",1)]),t("p",Y,[Z,c(" "+o(s.classSectionNum)+" 章節 "+o(s.classUnitNum)+" 單元 ",1)])]),t("p",null,[t("del",null,"NT$ "+o(s.origin_price),1),t("span",tt," NT$ "+o(s.price),1)]),t("div",st,[t("p",et," 同學 "+o(e.matchStuNumAndClass(s.id))+" 人 ",1),e.showCheck.includes(s.id)?(a(),i("a",ot," 已選購，結帳去 ")):(a(),i("button",{key:1,onClick:r=>e.addToCart(s.id),class:"btn btn-outline-primary btn-sm",type:"button"}," 加入購物車 ",8,at))])])])])])):s.courseStatus==="classFunding"?(a(),i("div",it,[u(_,{to:`/course/${s.id}`,class:"text-decoration-none"},{default:p(()=>[t("div",nt,[t("img",{src:s.imageUrl,class:"card-img-top img-cover img-hover-enlarge",alt:s.title},null,8,rt)]),t("div",ct,[t("span",lt,o(s.category),1),dt])]),_:2},1032,["to"]),t("div",ht,[t("div",mt,[t("div",_t,[t("h5",null,o(s.title),1),e.showbookmarkData.includes(s.id)?(a(),i("i",{key:0,class:"bi bi-bookmark-fill img-hover-enlarge",onClick:r=>e.BookmarkAction(s.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,ut)):(a(),i("i",{key:1,class:"bi bi-bookmark img-hover-enlarge",onClick:r=>e.BookmarkAction(s.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,pt))]),e.showFinalStuOrderData?(a(),i("div",kt,[t("p",bt,[c(" 募資價 "),t("span",gt," NT$ "+o(s.funding_price),1)]),t("div",yt,[t("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100",style:A({width:e.matchFundingTarget(s.id)+"%"})},null,4)]),t("div",ft,[t("p",wt," 達標率 "+o(e.matchFundingTarget(s.id))+" % ",1),t("p",vt,[t("span",Ct,o(w.countLeftDay(s.fundingEndDate)),1),c(" 結束 ")])]),t("div",St,[t("p",Dt," 同學 "+o(e.matchStuNumAndClass(s.id))+" 人 ",1),e.showCheck.includes(s.id)?(a(),i("a",xt," 已選購，結帳去 ")):(a(),i("button",{key:1,onClick:r=>e.addToCart(s.id),class:"btn btn-outline-primary btn-sm",type:"button"}," 加入購物車 ",8,At))])])):m("",!0)])])])):m("",!0)]))),128))])])):m("",!0)])}const Vt=v(T,[["render",Nt]]);export{Vt as default};
