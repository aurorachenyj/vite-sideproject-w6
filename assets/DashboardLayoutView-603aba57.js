import{_ as b,m as g,d as S,r as u,o as h,c as _,a as t,e,f as l,t as i,k,F as y,l as d}from"./index-abb58fd7.js";import{f as m}from"./frontOrderStore-85692c5c.js";const{VITE_APP_URL:p}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"aurora-path",BASE_URL:"/vue-learnFund/",MODE:"production",DEV:!1,PROD:!0},x={data(){return{totalSalesMoney:null,totalStudentNum:null,totalClassSalesNum:null}},created(){this.checkAdmin()},mounted(){this.getStuOrderList()},watch:{finalStuOrderData(){this.calcSaleData()}},computed:{...g(m,["finalStuOrderData"])},methods:{...S(m,["getStuOrderList"]),calcSaleData(){let s=0,o=0;this.finalStuOrderData.forEach(a=>{o+=a.stuNum,a.fundingPrice===void 0?s+=a.stuNum*a.classPrice:(console.log(a),s+=a.stuNum*a.classFundingPrice)}),this.totalSalesMoney=s,this.totalStudentNum=o,this.totalClassSalesNum=this.finalStuOrderData.length},checkAdmin(){const s=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=s,this.$http.post(`${p}/api/user/check`).then(o=>{o.data.success||this.$router.push("/adminLogin")}).catch(()=>{alert("請重新登入驗證"),this.$router.push("/adminLogin")})},adminLogout(){this.$http.post(`${p}/logout`).then(s=>{alert(s.data.message),this.$router.push("/adminLogin")}).catch(s=>{alert(s.response.data.message)})}}},w={class:"overflow-auto"},L={class:"fixed-top navbar navbar-expand-lg navbar-light bg-light text-nowrap flex-nowrap justify-content-evenly"},N={key:0,class:"main-content",style:{"margin-top":"80px"}},D={class:"container my-4"},P={class:"row gy-3"},V={class:"col"},O={class:"card shadow-sm"},$={class:"card-body pb-0"},A=t("h4",{class:"text-end"},"學生總數",-1),E={class:"display-4 fw-bold pb-0 text-end"},R={class:"col"},C={class:"card shadow-sm"},T={class:"card-body pb-0"},B=t("h4",{class:"text-end"},"已有學生之課程數",-1),F={class:"display-4 fw-bold pb-0 text-end"},M={class:"col"},I={class:"card shadow-sm"},U={class:"card-body pb-0"},j=t("h4",{class:"text-end"},"營業額",-1),z={class:"display-4 fw-bold pb-0 text-end"};function H(s,o,a,q,c,r){const n=u("RouterLink"),f=u("RouterView");return h(),_(y,null,[t("div",w,[t("nav",L,[e(n,{to:"/admin/index",class:"nav-link me-3 navbar-hover"},{default:l(()=>[d("後台首頁")]),_:1}),e(n,{to:"/admin/order",class:"nav-link me-3 navbar-hover"},{default:l(()=>[d("訂單管理")]),_:1}),e(n,{to:"/admin/coupon",class:"nav-link me-3 navbar-hover"},{default:l(()=>[d("優惠券管理")]),_:1}),e(n,{to:"/admin/courses",class:"nav-link me-3"},{default:l(()=>[d("課程管理")]),_:1}),e(n,{to:"/admin/content",class:"nav-link me-3"},{default:l(()=>[d("文章管理")]),_:1}),e(n,{to:"/adminLogin",class:"nav-link me-3"},{default:l(()=>[d("回後台登入")]),_:1}),e(n,{to:"/",class:"nav-link me-3"},{default:l(()=>[d("回前台")]),_:1}),t("button",{class:"btn btn-outline-dark btn-sm me-3",type:"button",onClick:o[0]||(o[0]=(...v)=>r.adminLogout&&r.adminLogout(...v))}," 登出 ")])]),s.finalStuOrderData?(h(),_("main",N,[t("div",D,[t("div",P,[t("div",V,[t("div",O,[t("div",$,[A,t("p",E,i(c.totalStudentNum),1)])])]),t("div",R,[t("div",C,[t("div",T,[B,t("p",F,i(c.totalClassSalesNum),1)])])]),t("div",M,[t("div",I,[t("div",U,[j,t("p",z,i(c.totalSalesMoney),1)])])])]),e(f)])])):k("",!0)],64)}const K=b(x,[["render",H]]);export{K as default};
