import{_ as p,m as y,a as g,o as c,b as a,d as s,t as o,i as n,h as _,p as r,F as h,n as v}from"./index-957ec83c.js";import{c as u}from"./cartStore-e96362a9.js";import{h as f}from"./zh-tw-a6f00c05.js";import"./Toast-c723ed56.js";const{VITE_APP_URL:b,VITE_APP_PATH:m}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"aurora-path",BASE_URL:"/vite-sideproject-w6/",MODE:"production",DEV:!1,PROD:!0},w={data(){return{activeItem:"",classId:this.$route.params.id,classData:{},currentCategory:"",similarClasses:[],checkBuyStatus:!1}},mounted(){this.classId=this.$route.params.id,this.getClassData(),this.getCartList()},computed:{...y(u,["cartList"])},watch:{currentCategory(){this.getSmilarClassData()},cartList(){this.getCartList(),this.checkBuyStatus=this.cartList.carts.some(e=>e.product_id===this.classId)}},methods:{...g(u,["getCartList","addToCart"]),countLeftDay(e){return Date.parse(new Date)>e?"已結束":(e=new Date(e).toISOString(),f(e).fromNow())},refreshPage(e){this.classId=e,this.$router.push(`/course/${e}`),this.getClassData(),this.getSmilarClassData(),window.scrollTo(0,0)},getClassData(){this.$http.get(`${b}/api/${m}/product/${this.classId}`).then(e=>{this.classData=e.data.product,this.currentCategory=e.data.product.category}).catch(()=>{this.$router.push("/notFound")})},getSmilarClassData(){this.$http.get(`${b}/api/${m}/products?category=${this.currentCategory}`).then(e=>{this.similarClasses=e.data.products.filter(i=>i.id!==this.classId)}).catch(e=>{console.log(e)})}}},k={class:"d-md-none fixed-bottom bg-white py-3"},D={class:"container"},x=s("button",{class:"btn w-25"},[s("i",{class:"bi bi-bookmark fs-3 fw-bold text-secondary"})],-1),I={key:0,class:"btn btn-primary w-75",href:"#/cart"},T={class:"container full-height"},C={class:"row my-3 g-3"},S={class:"col-md-7"},L={class:"ratio ratio-16x9 h-100"},N=["src"],P={key:0,class:"col-md-5 sticky-md-top",style:{top:"100px"}},B={class:"card h-100"},E={class:"card-body"},V={class:"w-25 badge bg-white text-primary border border-primary mb-3"},A=s("span",{class:"w-25 badge bg-secondary mb-3 ms-2"}," 募資中 ",-1),H={class:"bg-light p-3 my-3"},M={class:"text-muted mb-0"},U=s("p",{class:"text-dark mb-2"},[n(" 已募資金額 "),s("span",{class:"fw-bold"}," NT$ ??? ")],-1),j=s("div",{class:"progress"},[s("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100",style:{width:"75%"}}," ??% ")],-1),F={class:"d-flex justify-content-between mt-2"},O={class:"mb-0"},R={class:"text-secondary fw-bold fs-5"},z=s("p",{class:"mb-0"},"同學 ?? 人",-1),q={class:"d-flex mt-3 py-3 justify-content-between",style:{background:"white"}},G={class:"text-center w-50"},J={class:"mb-0"},K=s("br",null,null,-1),Q={class:"fs-4 fw-bold text-primary"},W={class:"border-start text-center w-50"},X={class:"mb-0"},Y=s("br",null,null,-1),Z={class:"fs-4"},$=s("button",{class:"btn w-25"},[s("i",{class:"bi bi-bookmark fs-3 fw-bold text-secondary"})],-1),ss={key:0,class:"btn btn-secondary w-75",href:"#/cart"},ts={key:1,class:"col-md-5 sticky-md-top",style:{top:"100px"}},es={class:"card h-100"},os={class:"card-body"},cs={class:"d-flex flex-column h-100"},as={class:"d-flex"},is={class:"w-25 badge bg-white text-primary border border-primary mb-3"},ls=s("span",{class:"w-25 badge bg-darkblue mb-3 ms-2"}," 已開課 ",-1),ns={class:"border-bottom mb-3"},rs={class:"h4 text-primary fw-bold my-3"},ds={class:"ms-1 fs-6 text-muted fw-light"},_s=s("p",{class:"mb-3"},[s("i",{class:"bi bi-people-fill"}),n(" 同學 ?? 人")],-1),hs={class:"mb-1"},us=s("i",{class:"bi bi-book"},null,-1),bs=s("i",{class:"bi bi-card-list"},null,-1),ms={class:"mt-auto"},ps=s("button",{class:"btn w-25"},[s("i",{class:"bi bi-bookmark fs-3 fw-bold text-secondary"})],-1),ys={key:0,class:"btn btn-primary text-white w-75",href:"#/cart"},gs={class:"col-md-7 mb-3"},vs={class:"card"},fs={class:"card-body"},ws={class:"nav nav-tabs mb-3 sticky-top bg-white",style:{top:"95px"}},ks={class:"nav-item"},Ds={class:"nav-item"},xs={class:"nav-item"},Is=s("h4",{id:"classSection",name:"classSection",class:"text-secondary fw-bold"}," 課程章節 ",-1),Ts=["innerHTML"],Cs=s("h4",{id:"getSkill",class:"text-secondary fw-bold"},"收穫技能",-1),Ss=["innerHTML"],Ls=s("p",null,null,-1),Ns=s("h4",{id:"teacherInfo",class:"text-secondary fw-bold"},"講師介紹",-1),Ps=["innerHTML"],Bs={class:"row g-3 my-5"},Es=s("h4",{class:"text-secondary fw-bold"},"類似課程推薦...",-1),Vs=["onClick"],As={class:"row align-items-center g-0"},Hs={class:"col-4 col-md-12"},Ms={class:"ratio ratio-4x3 overflow-hidden"},Us=["src"],js={class:"col-8 col-md-12"},Fs={class:"card-body"},Os={class:"d-flex flex-column flex-lg-row justify-content-between align-items-lg-center"},Rs={class:"mb-0 text-muted"},zs=s("i",{class:"bi bi-book"},null,-1),qs={class:"text-primary fw-bold fs-3 mb-0"},Gs=s("br",null,null,-1),Js=s("br",null,null,-1),Ks=s("br",null,null,-1),Qs=s("br",null,null,-1),Ws=s("br",null,null,-1),Xs=s("br",null,null,-1);function Ys(e,i,Zs,$s,t,d){return c(),a(h,null,[s("div",k,[s("div",D,[x,t.checkBuyStatus?(c(),a("a",I," 已購買，結帳去 ")):(c(),a("button",{key:1,onClick:i[0]||(i[0]=l=>e.addToCart(t.classData.id)),class:"btn btn-outline-primary w-75"}," 立即購買 "))])]),s("div",T,[s("div",C,[s("div",S,[s("div",L,[s("img",{style:{"background-position":"bottom"},class:"img-cover",src:t.classData.imageUrl,alt:""},null,8,N)])]),t.classData.courseStatus==="classFunding"?(c(),a("div",P,[s("div",B,[s("div",E,[s("span",V,o(t.classData.category),1),A,s("h4",null,o(t.classData.title),1),s("div",H,[s("p",M," 募資達標門檻 NT$ "+o(t.classData.funding_target),1),U,j,s("div",F,[s("p",O,[n(" 募資倒數 "),s("span",R,o(d.countLeftDay(t.classData.fundingEndDate)),1)]),z]),s("div",q,[s("div",G,[s("p",J,[n(" 募資優惠價 "),K,s("span",Q," NT$ "+o(t.classData.funding_price),1)])]),s("div",W,[s("p",X,[n(" 正式售價 "),Y,s("del",Z," NT$ "+o(t.classData.price),1)])])])]),s("div",null,[$,t.checkBuyStatus?(c(),a("a",ss," 已購買，結帳去 ")):(c(),a("button",{key:1,onClick:i[1]||(i[1]=l=>e.addToCart(t.classData.id)),class:"btn btn-outline-primary w-75"}," 立即購買 "))])])])])):_("",!0),t.classData.courseStatus==="classOpen"?(c(),a("div",ts,[s("div",es,[s("div",os,[s("div",cs,[s("div",as,[s("span",is,o(t.classData.category),1),ls]),s("div",ns,[s("h4",null,o(t.classData.title),1),s("p",rs,[n(" NT$ "+o(t.classData.price)+" ",1),s("del",ds," NT$ "+o(t.classData.origin_price),1)]),_s]),s("p",hs,[us,n(" 課程總時數："+o(t.classData.unit)+" 小時 ",1)]),s("p",null,[bs,n(" 章節單元數："+o(t.classData.classSectionNum)+" 章節 "+o(t.classData.classUnitNum)+" 單元 ",1)]),s("div",ms,[ps,t.checkBuyStatus?(c(),a("a",ys," 已購買，結帳去 ")):(c(),a("button",{key:1,onClick:i[2]||(i[2]=l=>e.addToCart(t.classData.id)),class:"btn btn-outline-primary w-75"}," 立即購買 "))])])])])])):_("",!0),s("div",gs,[s("div",vs,[s("div",fs,[s("ul",ws,[s("li",ks,[s("a",{class:r([{active:t.activeItem==="course"},"nav-link fw-bold"]),onclick:"{document.getElementById('classSection').scrollIntoView(),activeItem='course'}"},"課程章節",2)]),s("li",Ds,[s("a",{class:r([{active:t.activeItem==="skillTree"},"nav-link fw-bold"]),onclick:"{document.getElementById('getSkill').scrollIntoView() ,activeItem='skillTree'}"},"收穫技能",2)]),s("li",xs,[s("a",{class:r([{active:t.activeItem==="teacherInfo"},"nav-link fw-bold"]),onclick:"{document.getElementById('teacherInfo').scrollIntoView(),activeItem='teacherInfo'}"},"講師介紹",2)])]),s("div",null,[Is,s("div",{innerHTML:t.classData.content,class:"border-bottom mb-3"},null,8,Ts),Cs,s("div",{innerHTML:t.classData.skillTree,class:"border-bottom mb-3"},null,8,Ss),Ls,Ns,s("div",{innerHTML:t.classData.teacherInfo,class:"mb-3"},null,8,Ps)])])])])]),s("div",Bs,[Es,(c(!0),a(h,null,v(t.similarClasses,l=>(c(),a("div",{class:"col-md-4",key:l.id},[s("div",{class:"card hover-pointer",onClick:st=>d.refreshPage(l.id)},[s("div",As,[s("div",Hs,[s("div",Ms,[s("img",{src:l.imageUrl,class:"card-img-top img-cover p-2 p-md-0 img-hover-enlarge",alt:"..."},null,8,Us)])]),s("div",js,[s("div",Fs,[s("h5",null,o(l.title),1),s("div",Os,[s("p",Rs,[zs,n(" 課程時數 "+o(l.unit)+" 小時 ",1)]),s("p",qs," NT$ "+o(l.price),1)])])])])],8,Vs)]))),128))]),Gs,Js,Ks,Qs,Ws,Xs])],64)}const at=p(w,[["render",Ys]]);export{at as default};
