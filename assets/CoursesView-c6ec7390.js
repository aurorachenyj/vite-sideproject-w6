import{h as f}from"./zh-tw-a6f00c05.js";import"./Toast-10b4191b.js";import{_ as N,m as p,a as _,k as T,r as w,o as i,b as n,e as k,d as t,q as c,s as d,i as g,F as C,l as y,h as b,f as B,w as D,t as l,n as V}from"./index-2600c001.js";import{c as S}from"./cartStore-fa2e0f98.js";import{f as x}from"./frontOrderStore-bd5cd424.js";import{b as L}from"./bookmarkStore-77ed3b83.js";const{VITE_APP_URL:P,VITE_APP_PATH:I}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"aurora-path",BASE_URL:"/vite-sideproject-w6/",MODE:"production",DEV:!1,PROD:!0},F={data(){return{loadItem:!1,isLoading:!1,pageClassData:[],currentPage:1,clickItem:""}},created(){f.locale("zh-tw")},mounted(){this.getpageData(),this.getStuOrderList(),this.getLocalStorageBookmark()},watch:{currentPage(){this.getpageData(this.currentPage)},showbookmarkData(){this.setLocalStorageBookmark()},ShowCourseList(){this.getCartList()},cartList(){this.checkedClass()},showFinalStuOrderData(){this.matchStuNumAndClass(),this.matchFundingTarget()}},computed:{...p(S,["cartList","ShowCourseList","showCheck"]),...p(x,["showFinalStuOrderData"]),...p(L,["showbookmarkData"])},methods:{..._(S,["getCartList","addToCart","checkedClass","getAllCourse"]),..._(x,["getStuOrderList","matchFundingTarget","matchStuNumAndClass"]),..._(L,["setLocalStorageBookmark","getLocalStorageBookmark","BookmarkAction"]),changePage(s){this.currentPage=s,window.scrollTo({top:0})},getpageData(s=1,o=null){console.log(s),console.log(o);let u="";o===null?u=`${P}/api/${I}/products?page=${s}`:o!=null&&(u=`${P}/api/${I}/products?page=${s}&category=${o}`),T.get(u).then(m=>{console.log(m),this.pageClassData=m.data,this.currentPage=m.data.pagination.current_page,window.scrollTo({top:0}),console.log(this.pageClassData)}).catch(m=>{console.log(m)})},countLeftDay(s){return Date.parse(new Date)>s?"已":(s=new Date(s).toISOString(),f(s).fromNow())}}},O={class:"container mb-5 full-height"},E=B('<nav class="mt-5" style="" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="#" class="text-decoration-none text-muted">首頁</a></li><li class="breadcrumb-item active" aria-current="page"><a href="#" class="text-decoration-none text-dark">所有課程</a></li></ol></nav><h3 class="mb-5">全部課程總覽</h3>',2),j={class:"row g-4"},z={class:"col-md-1"},U={class:"overflow-auto sticky-top",style:{top:"120px"}},R={class:"list-group bg-darkblue list-group-flush d-flex flex-row flex-md-column"},H=t("br",null,null,-1),M=t("br",null,null,-1),q={class:"col-md-11"},G={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"},J={key:0,class:"card h-100 hover-shadow"},K={class:"ratio ratio-16x9 overflow-hidden"},Q=["src"],W={class:"position-absolute top-rem-1 start-rem-1"},X={class:"badge bg-darkblue me-2"},Y=t("span",{class:"badge bg-secondary"}," 已開課",-1),Z={class:"card-body"},$={class:"h-100 d-flex flex-column"},tt={class:"d-flex justify-content-between"},et=["onClick"],st=["onClick"],ot={class:"mt-auto"},at={class:"mb-2"},it={class:"mb-0"},nt=t("i",{class:"bi bi-book"},null,-1),lt={class:"mb-0"},rt=t("i",{class:"bi bi-card-list"},null,-1),ct={class:"text-primary fw-bold h3"},dt={class:"d-flex justify-content-between mt-2 align-items-center"},gt={class:"text-muted mb-0"},mt={key:0,href:"#/cart",type:"button",class:"btn btn-primary text-white btn-sm"},ht=["disabled","onClick"],ut={key:1,class:"card h-100 hover-shadow"},pt={class:"ratio ratio-16x9 overflow-hidden"},_t=["src"],kt={class:"position-absolute top-rem-1 start-rem-1"},bt={class:"badge bg-darkblue me-2"},vt=t("span",{class:"badge bg-white text-primary fw-bold"}," 募資中",-1),ft={class:"card-body"},wt={class:"h-100 d-flex flex-column"},Ct={class:"d-flex justify-content-between"},yt=["onClick"],Dt=["onClick"],St={key:0,class:"mt-auto"},xt={class:"mb-0 mt-1 mb-2"},Lt={class:"text-primary fw-bold h3"},Pt={class:"progress",style:{height:"20px"}},It={class:"d-flex justify-content-between"},At={class:"mb-0 text-muted"},Nt={class:"text-muted mb-0"},Tt={class:"text-secondary fw-bolder"},Bt={class:"d-flex justify-content-between mt-2"},Vt={class:"text-muted mb-0"},Ft={key:0,href:"#/cart",type:"button",class:"btn btn-primary text-white btn-sm"},Ot=["onClick"],Et={key:0,"aria-label":"Page navigation ",class:"mt-5"},jt={class:"pagination justify-content-center"},zt=t("a",{class:"page-link",href:"#","aria-label":"Previous"},[t("span",{"aria-hidden":"true"},"«")],-1),Ut=[zt],Rt=["onClick"],Ht={class:"page-link",href:"#"},Mt=t("a",{class:"page-link",href:"","aria-label":"Next"},[t("span",{"aria-hidden":"true"},"»")],-1),qt=[Mt];function Gt(s,o,u,m,a,r){const A=w("LoadingVue"),v=w("RouterLink");return i(),n("div",O,[k(A,{active:a.isLoading,"onUpdate:active":o[0]||(o[0]=e=>a.isLoading=e)},null,8,["active"]),E,t("div",j,[t("div",z,[t("div",U,[t("div",R,[t("a",{href:".#/courses",onClick:o[1]||(o[1]=c(e=>{a.clickItem="allCourse",r.getpageData(1)},["prevent"])),class:d([{active:a.clickItem==="allCourse"},"list-group-item list-group-item-action"])},[g(" 所有"),H,g(" 課程")],2),t("a",{href:".#/courses",onClick:o[2]||(o[2]=c(e=>{a.clickItem="language",r.getpageData(1,"語言")},["prevent"])),class:d([{active:a.clickItem==="language"},"list-group-item list-group-item-action"])},"語言",2),t("a",{href:".#/courses",onClick:o[3]||(o[3]=c(e=>{a.clickItem="art",r.getpageData(1,"藝術")},["prevent"])),class:d([{active:a.clickItem==="art"},"list-group-item list-group-item-action"])},"藝術",2),t("a",{href:"#",onClick:o[4]||(o[4]=c(e=>{a.clickItem="photography",r.getpageData(1,"攝影")},["prevent"])),class:d([{active:a.clickItem==="photography"},"list-group-item list-group-item-action"])},"攝影",2),t("a",{href:"#",onClick:o[5]||(o[5]=c(e=>{a.clickItem="business",r.getpageData(1,"商業")},["prevent"])),class:d([{active:a.clickItem==="business"},"list-group-item list-group-item-action"])},"商業",2),t("a",{href:"#",onClick:o[6]||(o[6]=c(e=>{a.clickItem="finance",r.getpageData(1,"投資理財")},["prevent"])),class:d([{active:a.clickItem==="finance"},"list-group-item list-group-item-action border-bottom"])},[g("投資"),M,g("理財")],2)])])]),t("div",q,[t("div",G,[(i(!0),n(C,null,y(a.pageClassData.products,e=>(i(),n("div",{class:"col position-relative",key:e.id},[e.courseStatus==="classOpen"?(i(),n("div",J,[k(v,{to:`/course/${e.id}`,class:"text-decoration-none"},{default:D(()=>[t("div",K,[t("img",{src:e.imageUrl,class:"card-img-top img-cover img-hover-enlarge",alt:"..."},null,8,Q)]),t("div",W,[t("span",X,l(e.category),1),Y])]),_:2},1032,["to"]),t("div",Z,[t("div",$,[t("div",tt,[t("h5",null,l(e.title),1),s.showbookmarkData.includes(e.id)?(i(),n("i",{key:0,class:"bi bi-bookmark-fill img-hover-enlarge",onClick:h=>s.BookmarkAction(e.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,et)):(i(),n("i",{key:1,class:"bi bi-bookmark img-hover-enlarge",onClick:h=>s.BookmarkAction(e.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,st))]),t("div",ot,[t("div",at,[t("p",it,[nt,g(" "+l(e.unit)+" 小時 ",1)]),t("p",lt,[rt,g(" "+l(e.classSectionNum)+" 章節 "+l(e.classUnitNum)+" 單元 ",1)])]),t("p",null,[t("del",null,"NT$ "+l(e.origin_price),1),t("span",ct," NT$ "+l(e.price),1)]),t("div",dt,[t("p",gt," 同學 "+l(s.matchStuNumAndClass(e.id))+" 人 ",1),s.showCheck.includes(e.id)?(i(),n("a",mt," 已選購，結帳去 ")):(i(),n("button",{key:1,disabled:s.sendLoadItem===!0,onClick:h=>s.addToCart(e.id),class:"btn btn-outline-primary btn-sm"}," 加入購物車 ",8,ht))])])])])])):e.courseStatus==="classFunding"?(i(),n("div",ut,[k(v,{to:`/course/${e.id}`,class:"text-decoration-none"},{default:D(()=>[t("div",pt,[t("img",{src:e.imageUrl,class:"card-img-top img-cover img-hover-enlarge",alt:"..."},null,8,_t)]),t("div",kt,[t("span",bt,l(e.category),1),vt])]),_:2},1032,["to"]),t("div",ft,[t("div",wt,[t("div",Ct,[t("h5",null,l(e.title),1),s.showbookmarkData.includes(e.id)?(i(),n("i",{key:0,class:"bi bi-bookmark-fill img-hover-enlarge",onClick:h=>s.BookmarkAction(e.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,yt)):(i(),n("i",{key:1,class:"bi bi-bookmark img-hover-enlarge",onClick:h=>s.BookmarkAction(e.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,Dt))]),s.showFinalStuOrderData?(i(),n("div",St,[t("p",xt,[g(" 募資價 "),t("span",Lt," NT$ "+l(e.funding_price),1)]),t("div",Pt,[t("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100",style:V({width:s.matchFundingTarget(e.id)+"%"})},null,4)]),t("div",It,[t("p",At," 達標率 "+l(s.matchFundingTarget(e.id))+" % ",1),t("p",Nt,[t("span",Tt,l(r.countLeftDay(e.fundingEndDate)),1),g(" 結束 ")])]),t("div",Bt,[t("p",Vt," 同學 "+l(s.matchStuNumAndClass(e.id))+" 人 ",1),s.showCheck.includes(e.id)?(i(),n("a",Ft," 已選購，結帳去 ")):(i(),n("button",{key:1,onClick:h=>s.addToCart(e.id),class:"btn btn-outline-primary btn-sm"}," 加入購物車 ",8,Ot))])])):b("",!0)])])])):b("",!0)]))),128))])])]),a.pageClassData.pagination?(i(),n("nav",Et,[t("ul",jt,[t("li",{class:d(["page-item",{disabled:!a.pageClassData.pagination.has_pre}]),onClick:o[7]||(o[7]=c(e=>r.changePage(a.currentPage-1),["prevent"]))},Ut,2),(i(!0),n(C,null,y(a.pageClassData.pagination.total_pages,e=>(i(),n("li",{class:d(["page-item",{active:e===a.currentPage}]),key:e+"hello",onClick:c(h=>r.changePage(e),["prevent"])},[t("a",Ht,l(e),1)],10,Rt))),128)),t("li",{class:d(["page-item",{disabled:!a.pageClassData.pagination.has_next}]),onClick:o[8]||(o[8]=c(e=>r.changePage(a.currentPage+1),["prevent"]))},qt,2)])])):b("",!0)])}const Zt=N(F,[["render",Gt]]);export{Zt as default};
