import{n as p,p as n,I as f}from"./index-264315fb.js";const{VITE_APP_URL:o,VITE_APP_PATH:l}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"aurora-path",BASE_URL:"/vue-learnFund/",MODE:"production",DEV:!1,PROD:!0},O=p("frontOrderStore",{state:()=>({totalStuOrderList:[],finalStuOrderData:[]}),mounted(){},actions:{getStuOrderList(){this.totalStuOrderList=[],n.get(`${o}/api/${l}/orders`).then(s=>{const e=s.data.pagination.total_pages,t=[];for(let a=1;a<=e;a++)t.push(a);const d=t.map(a=>n.get(`${o}/api/${l}/orders?page=${a}`));Promise.all(d).then(a=>{a.forEach(r=>{this.totalStuOrderList.push(...r.data.orders)});const i=[...f(this.totalStuOrderList)].map(r=>Object.values(r.products)).flat().map(r=>({classId:r.product.id,classTitle:r.product.title,classPrice:r.product.price,classFundingPrice:r.product.funding_price,classfundingTarget:r.product.funding_target})),c=Object.values(i.reduce((r,u)=>(r[u.classId]?r[u.classId].stuNum+=1:r[u.classId]={...u,stuNum:1},r),{}));this.finalStuOrderData=c}).catch(a=>{console.log(a)})}).catch(s=>{console.log(s)})},matchFundingTarget(s){let e=null;return this.finalStuOrderData.find(t=>{if(t.classId===s)return e=Math.round(t.stuNum*t.classFundingPrice/t.classfundingTarget*100),!0;e=0}),e},matchFundingMoney(s){let e=null;return this.finalStuOrderData.find(t=>{if(t.classId===s)return e=t.stuNum*t.classFundingPrice,!0;e=0}),e},matchStuNumAndClass(s){let e=null;return this.finalStuOrderData.find(t=>{if(t.classId===s)return e=t.stuNum,!0;e=0}),e}},getters:{showFinalStuOrderData:({finalStuOrderData:s})=>s}});export{O as f};
