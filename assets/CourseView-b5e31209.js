import{_ as m,m as p,a as y,o as c,b as a,d as s,t as e,i as n,h as d,F as _,l as g}from"./index-873dceca.js";import{c as h}from"./cartStore-7ae8e24e.js";import{h as f}from"./zh-tw-a6f00c05.js";import"./Toast-fa3538a5.js";const{VITE_APP_URL:u,VITE_APP_PATH:b}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"aurora-path",BASE_URL:"/vite-sideproject-w6/",MODE:"production",DEV:!1,PROD:!0},v={data(){return{classId:this.$route.params.id,classData:{},currentCategory:"",similarClasses:[],checkBuyStatus:!1}},mounted(){this.classId=this.$route.params.id,this.getClassData(),this.getCartList()},computed:{...p(h,["cartList"])},watch:{currentCategory(){this.getSmilarClassData()},cartList(){this.getCartList(),this.checkBuyStatus=this.cartList.carts.some(o=>o.product_id===this.classId)}},methods:{...y(h,["getCartList","addToCart"]),countLeftDay(o){return Date.parse(new Date)>o?"已結束":(o=new Date(o).toISOString(),f(o).fromNow())},refreshPage(o){this.classId=o,this.$router.push(`/course/${o}`),this.getClassData(),this.getSmilarClassData(),window.scrollTo(0,0)},getClassData(){this.$http.get(`${u}/api/${b}/product/${this.classId}`).then(o=>{this.classData=o.data.product,this.currentCategory=o.data.product.category}).catch(()=>{this.$router.push("/notFound")})},getSmilarClassData(){this.$http.get(`${u}/api/${b}/products?category=${this.currentCategory}`).then(o=>{this.similarClasses=o.data.products.filter(l=>l.id!==this.classId)}).catch(o=>{console.log(o)})}}},w={class:"d-md-none fixed-bottom bg-white py-3"},k={class:"container"},D=s("button",{class:"btn w-25"},[s("i",{class:"bi bi-bookmark fs-3 fw-bold text-secondary"})],-1),x={key:0,class:"btn btn-primary w-75",href:"#/cart"},T={class:"container full-height"},C={class:"row my-3 g-3"},S={class:"col-md-7"},I={class:"ratio ratio-16x9 h-100"},L=["src"],N={key:0,class:"col-md-5 sticky-md-top",style:{top:"100px"}},P={class:"card h-100"},B={class:"card-body"},E={class:"w-25 badge bg-white text-primary border border-primary mb-3"},V=s("span",{class:"w-25 badge bg-secondary mb-3 ms-2"}," 募資中 ",-1),A={class:"bg-light p-3 my-3"},H={class:"text-muted mb-0"},M=s("p",{class:"text-dark mb-2"},[n(" 已募資金額 "),s("span",{class:"fw-bold"}," NT$ ??? ")],-1),U=s("div",{class:"progress"},[s("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100",style:{width:"75%"}}," ??% ")],-1),j={class:"d-flex justify-content-between mt-2"},F={class:"mb-0"},O={class:"text-secondary fw-bold fs-5"},R=s("p",{class:"mb-0"},"同學 ?? 人",-1),q={class:"d-flex mt-3 py-3 justify-content-between",style:{background:"white"}},z={class:"text-center w-50"},G={class:"mb-0"},J=s("br",null,null,-1),K={class:"fs-4 fw-bold text-primary"},Q={class:"border-start text-center w-50"},W={class:"mb-0"},X=s("br",null,null,-1),Y={class:"fs-4"},Z=s("button",{class:"btn w-25"},[s("i",{class:"bi bi-bookmark fs-3 fw-bold text-secondary"})],-1),$={key:0,class:"btn btn-secondary w-75",href:"#/cart"},ss={key:1,class:"col-md-5 sticky-md-top",style:{top:"100px"}},ts={class:"card h-100"},os={class:"card-body"},es={class:"d-flex flex-column h-100"},cs={class:"d-flex"},as={class:"w-25 badge bg-white text-primary border border-primary mb-3"},ls=s("span",{class:"w-25 badge bg-darkblue mb-3 ms-2"}," 已開課 ",-1),is={class:"border-bottom mb-3"},ns={class:"h4 text-primary fw-bold my-3"},rs={class:"ms-1 fs-6 text-muted fw-light"},ds=s("p",{class:"mb-3"},[s("i",{class:"bi bi-people-fill"}),n(" 同學 ?? 人")],-1),_s={class:"mb-1"},hs=s("i",{class:"bi bi-book"},null,-1),us=s("i",{class:"bi bi-card-list"},null,-1),bs={class:"mt-auto"},ms=s("button",{class:"btn w-25"},[s("i",{class:"bi bi-bookmark fs-3 fw-bold text-secondary"})],-1),ps={key:0,class:"btn btn-primary text-white w-75",href:"#/cart"},ys={class:"col-md-7 mb-3"},gs={class:"card"},fs={class:"card-body"},vs=s("ul",{class:"nav nav-tabs mb-3 sticky-top bg-white",style:{top:"90px"}},[s("li",{class:"nav-item"},[s("a",{class:"nav-link fw-bold",onclick:"document.getElementById('classSection').scrollIntoView()"},"課程章節")]),s("li",{class:"nav-item"},[s("a",{class:"nav-link fw-bold",onclick:"document.getElementById('getSkill').scrollIntoView()"},"收穫技能")]),s("li",{class:"nav-item"},[s("a",{class:"nav-link fw-bold",onclick:"document.getElementById('teacherInfo').scrollIntoView()"},"講師介紹")])],-1),ws=s("h4",{id:"classSection",name:"classSection",class:"text-secondary fw-bold"}," 課程章節 ",-1),ks=["innerHTML"],Ds=s("h4",{id:"getSkill",class:"text-secondary fw-bold"},"收穫技能",-1),xs=["innerHTML"],Ts=s("p",null,null,-1),Cs=s("h4",{id:"teacherInfo",class:"text-secondary fw-bold"},"講師介紹",-1),Ss=["innerHTML"],Is={class:"row g-3 my-5"},Ls=s("h4",{class:"text-secondary fw-bold"},"類似課程推薦...",-1),Ns=["onClick"],Ps={class:"row align-items-center g-0"},Bs={class:"col-4 col-md-12"},Es={class:"ratio ratio-4x3 overflow-hidden"},Vs=["src"],As={class:"col-8 col-md-12"},Hs={class:"card-body"},Ms={class:"d-flex flex-column flex-lg-row justify-content-between align-items-lg-center"},Us={class:"mb-0 text-muted"},js=s("i",{class:"bi bi-book"},null,-1),Fs={class:"text-primary fw-bold fs-3 mb-0"},Os=s("br",null,null,-1),Rs=s("br",null,null,-1),qs=s("br",null,null,-1),zs=s("br",null,null,-1),Gs=s("br",null,null,-1),Js=s("br",null,null,-1);function Ks(o,l,Qs,Ws,t,r){return c(),a(_,null,[s("div",w,[s("div",k,[D,t.checkBuyStatus?(c(),a("a",x," 已購買，結帳去 ")):(c(),a("button",{key:1,onClick:l[0]||(l[0]=i=>o.addToCart(t.classData.id)),class:"btn btn-outline-primary w-75"}," 立即購買 "))])]),s("div",T,[s("div",C,[s("div",S,[s("div",I,[s("img",{style:{"background-position":"bottom"},class:"img-cover",src:t.classData.imageUrl,alt:""},null,8,L)])]),t.classData.courseStatus==="classFunding"?(c(),a("div",N,[s("div",P,[s("div",B,[s("span",E,e(t.classData.category),1),V,s("h4",null,e(t.classData.title),1),s("div",A,[s("p",H," 募資達標門檻 NT$ "+e(t.classData.funding_target),1),M,U,s("div",j,[s("p",F,[n(" 募資倒數 "),s("span",O,e(r.countLeftDay(t.classData.fundingEndDate)),1)]),R]),s("div",q,[s("div",z,[s("p",G,[n(" 募資優惠價 "),J,s("span",K," NT$ "+e(t.classData.funding_price),1)])]),s("div",Q,[s("p",W,[n(" 正式售價 "),X,s("del",Y," NT$ "+e(t.classData.price),1)])])])]),s("div",null,[Z,t.checkBuyStatus?(c(),a("a",$," 已購買，結帳去 ")):(c(),a("button",{key:1,onClick:l[1]||(l[1]=i=>o.addToCart(t.classData.id)),class:"btn btn-outline-primary w-75"}," 立即購買 "))])])])])):d("",!0),t.classData.courseStatus==="classOpen"?(c(),a("div",ss,[s("div",ts,[s("div",os,[s("div",es,[s("div",cs,[s("span",as,e(t.classData.category),1),ls]),s("div",is,[s("h4",null,e(t.classData.title),1),s("p",ns,[n(" NT$ "+e(t.classData.price)+" ",1),s("del",rs," NT$ "+e(t.classData.origin_price),1)]),ds]),s("p",_s,[hs,n(" 課程總時數："+e(t.classData.unit)+" 小時 ",1)]),s("p",null,[us,n(" 章節單元數："+e(t.classData.classSectionNum)+" 章節 "+e(t.classData.classUnitNum)+" 單元 ",1)]),s("div",bs,[ms,t.checkBuyStatus?(c(),a("a",ps," 已購買，結帳去 ")):(c(),a("button",{key:1,onClick:l[2]||(l[2]=i=>o.addToCart(t.classData.id)),class:"btn btn-outline-primary w-75"}," 立即購買 "))])])])])])):d("",!0),s("div",ys,[s("div",gs,[s("div",fs,[vs,s("div",null,[ws,s("div",{innerHTML:t.classData.content,class:"border-bottom mb-3"},null,8,ks),Ds,s("div",{innerHTML:t.classData.skillTree,class:"border-bottom mb-3"},null,8,xs),Ts,Cs,s("div",{innerHTML:t.classData.teacherInfo,class:"mb-3"},null,8,Ss)])])])])]),s("div",Is,[Ls,(c(!0),a(_,null,g(t.similarClasses,i=>(c(),a("div",{class:"col-md-4",key:i.id},[s("div",{class:"card hover-pointer",onClick:Xs=>r.refreshPage(i.id)},[s("div",Ps,[s("div",Bs,[s("div",Es,[s("img",{src:i.imageUrl,class:"card-img-top img-cover p-2 p-md-0 img-hover-enlarge",alt:"..."},null,8,Vs)])]),s("div",As,[s("div",Hs,[s("h5",null,e(i.title),1),s("div",Ms,[s("p",Us,[js,n(" 課程時數 "+e(i.unit)+" 小時 ",1)]),s("p",Fs," NT$ "+e(i.price),1)])])])])],8,Ns)]))),128))]),Os,Rs,qs,zs,Gs,Js])],64)}const tt=m(v,[["render",Ks]]);export{tt as default};
