import{h as f}from"./zh-tw-a6f00c05.js";import{_ as T,m as p,d as _,p as N,r as w,o as i,c as n,e as k,a as t,t as l,h as c,J as d,l as m,F as y,E as C,k as b,f as D,H as B}from"./index-abb58fd7.js";import{c as x}from"./cartStore-46488f71.js";import{f as S}from"./frontOrderStore-85692c5c.js";import{b as L}from"./bookmarkStore-7b456337.js";import"./Toast-3b91fd9e.js";const{VITE_APP_URL:P,VITE_APP_PATH:I}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"aurora-path",BASE_URL:"/vue-learnFund/",MODE:"production",DEV:!1,PROD:!0},V={data(){return{loadItem:!1,isLoading:!1,pageClassData:[],currentPage:1,clickItem:""}},created(){f.locale("zh-tw")},mounted(){this.getpageData(),this.getStuOrderList(),this.getLocalStorageBookmark()},watch:{currentPage(){this.getpageData(this.currentPage)},showbookmarkData(){this.setLocalStorageBookmark()},ShowCourseList(){this.getCartList()},cartList(){this.checkedClass()},showFinalStuOrderData(){this.matchStuNumAndClass(),this.matchFundingTarget()}},computed:{...p(x,["cartList","ShowCourseList","showCheck"]),...p(S,["showFinalStuOrderData"]),...p(L,["showbookmarkData"])},methods:{..._(x,["getCartList","addToCart","checkedClass","getAllCourse"]),..._(S,["getStuOrderList","matchFundingTarget","matchStuNumAndClass"]),..._(L,["setLocalStorageBookmark","getLocalStorageBookmark","BookmarkAction"]),changePage(s){this.currentPage=s,window.scrollTo({top:0})},getpageData(s=1,a=null){let u="";a===null?u=`${P}/api/${I}/products?page=${s}`:a!=null&&(u=`${P}/api/${I}/products?page=${s}&category=${a}`),N.get(u).then(g=>{this.pageClassData=g.data,this.currentPage=g.data.pagination.current_page,window.scrollTo({top:0})}).catch(g=>{console.log(g)})},countLeftDay(s){return Date.parse(new Date)>s?"已":(s=new Date(s).toISOString(),f(s).fromNow())}}},F={class:"container mb-5 full-height"},E={class:"mt-5",style:{},"aria-label":"breadcrumb"},O={class:"breadcrumb"},z=t("li",{class:"breadcrumb-item"},[t("a",{href:"#",class:"text-decoration-none text-muted"},"首頁")],-1),U={class:"breadcrumb-item active","aria-current":"page"},j={href:"#",class:"text-decoration-none text-dark"},R={class:"mb-5"},H={class:"row g-4"},M={class:"col-md-1"},J={class:"overflow-auto sticky-top",style:{top:"120px"}},q={class:"list-group bg-darkblue list-group-flush d-flex flex-row flex-md-column"},G=t("br",null,null,-1),K=t("br",null,null,-1),Q={class:"col-md-11"},W={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"},X={key:0,class:"card h-100 hover-shadow"},Y={class:"ratio ratio-16x9 overflow-hidden"},Z=["src"],$={class:"position-absolute top-rem-1 start-rem-1"},tt={class:"badge bg-darkblue me-2"},et=t("span",{class:"badge bg-secondary"}," 已開課",-1),st={class:"card-body"},ot={class:"h-100 d-flex flex-column"},at={class:"d-flex justify-content-between"},it=["onClick"],nt=["onClick"],lt={class:"mt-auto"},rt={class:"mb-2"},ct={class:"mb-0"},dt=t("i",{class:"bi bi-book"},null,-1),mt={class:"mb-0"},ht=t("i",{class:"bi bi-card-list"},null,-1),gt={class:"text-primary fw-bold h3"},ut={class:"d-flex justify-content-between mt-2 align-items-center"},pt={class:"text-muted mb-0"},_t={key:0,href:"#/cart",type:"button",class:"btn btn-primary text-white btn-sm"},kt=["onClick"],bt={key:1,class:"card h-100 hover-shadow"},vt={class:"ratio ratio-16x9 overflow-hidden"},ft=["src"],wt={class:"position-absolute top-rem-1 start-rem-1"},yt={class:"badge bg-darkblue me-2"},Ct=t("span",{class:"badge bg-white text-primary fw-bold"}," 募資中",-1),Dt={class:"card-body"},xt={class:"h-100 d-flex flex-column"},St={class:"d-flex justify-content-between"},Lt=["onClick"],Pt=["onClick"],It={key:0,class:"mt-auto"},At={class:"mb-0 mt-1 mb-2"},Tt={class:"text-primary fw-bold h3"},Nt={class:"progress",style:{height:"20px"}},Bt={class:"d-flex justify-content-between"},Vt={class:"mb-0 text-muted"},Ft={class:"text-muted mb-0"},Et={class:"text-secondary fw-bolder"},Ot={class:"d-flex justify-content-between mt-2"},zt={class:"text-muted mb-0"},Ut={key:0,href:"#/cart",type:"button",class:"btn btn-primary text-white btn-sm"},jt=["onClick"],Rt={key:0,"aria-label":"Page navigation ",class:"mt-5"},Ht={class:"pagination justify-content-center"},Mt=t("a",{class:"page-link",href:"#","aria-label":"Previous"},[t("span",{"aria-hidden":"true"},"«")],-1),Jt=[Mt],qt=["onClick"],Gt={class:"page-link",href:"#"},Kt=t("a",{class:"page-link",href:"","aria-label":"Next"},[t("span",{"aria-hidden":"true"},"»")],-1),Qt=[Kt];function Wt(s,a,u,g,o,r){const A=w("LoadingVue"),v=w("RouterLink");return i(),n("div",F,[k(A,{active:o.isLoading,"onUpdate:active":a[0]||(a[0]=e=>o.isLoading=e)},null,8,["active"]),t("nav",E,[t("ol",O,[z,t("li",U,[t("a",j,l(o.clickItem),1)])])]),t("h3",R,l(o.clickItem),1),t("div",H,[t("div",M,[t("div",J,[t("div",q,[t("a",{href:".#/courses",onClick:a[1]||(a[1]=c(e=>{o.clickItem="所有課程",r.getpageData(1)},["prevent"])),class:d([{active:o.clickItem==="所有課程"},"list-group-item list-group-item-action"])},[m(" 所有"),G,m(" 課程")],2),t("a",{href:".#/courses",onClick:a[2]||(a[2]=c(e=>{o.clickItem="語言",r.getpageData(1,"語言")},["prevent"])),class:d([{active:o.clickItem==="語言"},"list-group-item list-group-item-action"])},"語言",2),t("a",{href:".#/courses",onClick:a[3]||(a[3]=c(e=>{o.clickItem="藝術",r.getpageData(1,"藝術")},["prevent"])),class:d([{active:o.clickItem==="藝術"},"list-group-item list-group-item-action"])},"藝術",2),t("a",{href:"#",onClick:a[4]||(a[4]=c(e=>{o.clickItem="攝影",r.getpageData(1,"攝影")},["prevent"])),class:d([{active:o.clickItem==="攝影"},"list-group-item list-group-item-action"])},"攝影",2),t("a",{href:"#",onClick:a[5]||(a[5]=c(e=>{o.clickItem="商業",r.getpageData(1,"商業")},["prevent"])),class:d([{active:o.clickItem==="商業"},"list-group-item list-group-item-action"])},"商業",2),t("a",{href:"#",onClick:a[6]||(a[6]=c(e=>{o.clickItem="投資理財",r.getpageData(1,"投資理財")},["prevent"])),class:d([{active:o.clickItem==="投資理財"},"list-group-item list-group-item-action border-bottom"])},[m("投資"),K,m("理財")],2)])])]),t("div",Q,[t("div",W,[(i(!0),n(y,null,C(o.pageClassData.products,e=>(i(),n("div",{class:"col position-relative",key:e.id},[e.courseStatus==="classOpen"?(i(),n("div",X,[k(v,{to:`/course/${e.id}`,class:"text-decoration-none"},{default:D(()=>[t("div",Y,[t("img",{src:e.imageUrl,class:"card-img-top img-cover img-hover-enlarge",alt:"..."},null,8,Z)]),t("div",$,[t("span",tt,l(e.category),1),et])]),_:2},1032,["to"]),t("div",st,[t("div",ot,[t("div",at,[t("h5",null,l(e.title),1),s.showbookmarkData.includes(e.id)?(i(),n("i",{key:0,class:"bi bi-bookmark-fill img-hover-enlarge",onClick:h=>s.BookmarkAction(e.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,it)):(i(),n("i",{key:1,class:"bi bi-bookmark img-hover-enlarge",onClick:h=>s.BookmarkAction(e.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,nt))]),t("div",lt,[t("div",rt,[t("p",ct,[dt,m(" "+l(e.unit)+" 小時 ",1)]),t("p",mt,[ht,m(" "+l(e.classSectionNum)+" 章節 "+l(e.classUnitNum)+" 單元 ",1)])]),t("p",null,[t("del",null,"NT$ "+l(e.origin_price),1),t("span",gt," NT$ "+l(e.price),1)]),t("div",ut,[t("p",pt," 同學 "+l(s.matchStuNumAndClass(e.id))+" 人 ",1),s.showCheck.includes(e.id)?(i(),n("a",_t," 已選購，結帳去 ")):(i(),n("button",{key:1,onClick:h=>s.addToCart(e.id),class:"btn btn-outline-primary btn-sm",type:"button"}," 加入購物車 ",8,kt))])])])])])):e.courseStatus==="classFunding"?(i(),n("div",bt,[k(v,{to:`/course/${e.id}`,class:"text-decoration-none"},{default:D(()=>[t("div",vt,[t("img",{src:e.imageUrl,class:"card-img-top img-cover img-hover-enlarge",alt:"..."},null,8,ft)]),t("div",wt,[t("span",yt,l(e.category),1),Ct])]),_:2},1032,["to"]),t("div",Dt,[t("div",xt,[t("div",St,[t("h5",null,l(e.title),1),s.showbookmarkData.includes(e.id)?(i(),n("i",{key:0,class:"bi bi-bookmark-fill img-hover-enlarge",onClick:h=>s.BookmarkAction(e.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,Lt)):(i(),n("i",{key:1,class:"bi bi-bookmark img-hover-enlarge",onClick:h=>s.BookmarkAction(e.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,Pt))]),s.showFinalStuOrderData?(i(),n("div",It,[t("p",At,[m(" 募資價 "),t("span",Tt," NT$ "+l(e.funding_price),1)]),t("div",Nt,[t("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100",style:B({width:s.matchFundingTarget(e.id)+"%"})},null,4)]),t("div",Bt,[t("p",Vt," 達標率 "+l(s.matchFundingTarget(e.id))+" % ",1),t("p",Ft,[t("span",Et,l(r.countLeftDay(e.fundingEndDate)),1),m(" 結束 ")])]),t("div",Ot,[t("p",zt," 同學 "+l(s.matchStuNumAndClass(e.id))+" 人 ",1),s.showCheck.includes(e.id)?(i(),n("a",Ut," 已選購，結帳去 ")):(i(),n("button",{key:1,onClick:h=>s.addToCart(e.id),class:"btn btn-outline-primary btn-sm",type:"button"}," 加入購物車 ",8,jt))])])):b("",!0)])])])):b("",!0)]))),128))])])]),o.pageClassData.pagination?(i(),n("nav",Rt,[t("ul",Ht,[t("li",{class:d(["page-item",{disabled:!o.pageClassData.pagination.has_pre}]),onClick:a[7]||(a[7]=c(e=>r.changePage(o.currentPage-1),["prevent"]))},Jt,2),(i(!0),n(y,null,C(o.pageClassData.pagination.total_pages,e=>(i(),n("li",{class:d(["page-item",{active:e===o.currentPage}]),key:e+"hello",onClick:c(h=>r.changePage(e),["prevent"])},[t("a",Gt,l(e),1)],10,qt))),128)),t("li",{class:d(["page-item",{disabled:!o.pageClassData.pagination.has_next}]),onClick:a[8]||(a[8]=c(e=>r.changePage(o.currentPage+1),["prevent"]))},Qt,2)])])):b("",!0)])}const se=T(V,[["render",Wt]]);export{se as default};
