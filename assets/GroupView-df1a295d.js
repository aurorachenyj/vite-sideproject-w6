import{_ as C,m as d,b as h,l as D,r as g,o as a,c as i,e as t,d as m,t as e,F as x,B as S,w as b,j as c,D as L,i as u}from"./index-10380651.js";import{h as p}from"./zh-tw-a6f00c05.js";import{c as y}from"./cartStore-67d832be.js";import{f as k}from"./frontOrderStore-170cb674.js";import{b as v}from"./bookmarkStore-617ac33f.js";import"./Toast-f77f3f8e.js";const{VITE_APP_URL:A,VITE_APP_PATH:$}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"aurora-path",BASE_URL:"/vite-sideproject-w6/",MODE:"production",DEV:!1,PROD:!0},N={data(){return{category:"",categoryData:{}}},watch:{category(){this.getCategoryData(this.category)}},created(){p.locale("zh-tw")},mounted(){console.log(this.$route.params.category),this.category=this.$route.params.category,this.getCategoryData(this.category)},computed:{...d(y,["cartList","ShowCourseList","showCheck"]),...d(k,["showFinalStuOrderData"]),...d(v,["showbookmarkData"])},methods:{...h(y,["getCartList","addToCart","checkedClass","getAllCourse"]),...h(k,["getStuOrderList","matchFundingTarget","matchStuNumAndClass"]),...h(v,["setLocalStorageBookmark","getLocalStorageBookmark","BookmarkAction"]),countLeftDay(s){return Date.parse(new Date)>s?"已":(s=new Date(s).toISOString(),p(s).fromNow())},getCategoryData(s){console.log(this.category),D.get(`${A}/api/${$}/products?category=${s}`).then(n=>{console.log(n),this.categoryData=n.data}).catch(n=>{console.log(n)})}}},T={class:"full-height"},B={class:"sticky-top",style:{top:"80px","background-image":"url(./img/content-bg.png)","background-position":"bottom right"}},V={class:"container"},P={class:"pt-3",style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb"},E={class:"breadcrumb"},j=t("li",{class:"breadcrumb-item"},[t("a",{href:"#",class:"text-decoration-none text-muted"},"首頁")],-1),F={class:"breadcrumb-item active","aria-current":"page"},O={href:"#",class:"text-decoration-none text-dark"},U={class:"mb-3"},z=t("div",{class:"d-flex justify-content-center mb-5 pb-3"},[t("button",{class:"btn btn-outline-primary me-3 bg-light opacity-75"}," 全部 "),t("button",{class:"btn btn-outline-primary me-3 bg-light opacity-75"}," 已開課 "),t("button",{class:"btn btn-outline-primary bg-light opacity-75"}," 募資中 ")],-1),I={class:"container"},R={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-3"},H={key:0,class:"card h-100 hover-shadow"},G={class:"ratio ratio-16x9 overflow-hidden"},M=["src"],q={class:"position-absolute top-rem-1 start-rem-1"},J={class:"badge bg-darkblue me-2"},K=t("span",{class:"badge bg-secondary"}," 已開課",-1),Q={class:"card-body"},W={class:"h-100 d-flex flex-column"},X={class:"d-flex justify-content-between"},Y=["onClick"],Z=["onClick"],tt={class:"mt-auto"},ot={class:"mb-2"},st={class:"mb-0"},et=t("i",{class:"bi bi-book"},null,-1),at={class:"mb-0"},it=t("i",{class:"bi bi-card-list"},null,-1),nt={class:"text-primary fw-bold h3"},rt={class:"d-flex justify-content-between mt-2 align-items-center"},ct={class:"text-muted mb-0"},lt={key:0,href:"#/cart",type:"button",class:"btn btn-primary text-white btn-sm"},dt=["disabled","onClick"],ht={key:1,class:"card h-100 hover-shadow"},mt={class:"ratio ratio-16x9 overflow-hidden"},_t=["src"],gt={class:"position-absolute top-rem-1 start-rem-1"},bt={class:"badge bg-darkblue me-2"},ut=t("span",{class:"badge bg-white text-primary fw-bold"}," 募資中",-1),pt={class:"card-body"},yt={class:"h-100 d-flex flex-column"},kt={class:"d-flex justify-content-between"},vt=["onClick"],ft=["onClick"],wt={key:0,class:"mt-auto"},Ct={class:"mb-0 mt-1 mb-2"},Dt={class:"text-primary fw-bold h3"},xt={class:"progress",style:{height:"20px"}},St={class:"d-flex justify-content-between"},Lt={class:"mb-0 text-muted"},At={class:"text-muted mb-0"},$t={class:"text-secondary fw-bolder"},Nt={class:"d-flex justify-content-between mt-2"},Tt={class:"text-muted mb-0"},Bt={key:0,href:"#/cart",type:"button",class:"btn btn-primary text-white btn-sm"},Vt=["onClick"];function Pt(s,n,Et,jt,l,f){const w=g("LoadingVue"),_=g("RouterLink");return a(),i("div",T,[t("div",B,[t("div",V,[m(w,{active:s.isLoading,"onUpdate:active":n[0]||(n[0]=o=>s.isLoading=o)},null,8,["active"]),t("nav",P,[t("ol",E,[j,t("li",F,[t("a",O,e(l.category),1)])])]),t("h3",U,e(l.category),1),z])]),t("div",I,[t("div",R,[(a(!0),i(x,null,S(l.categoryData.products,o=>(a(),i("div",{class:"col position-relative",key:o.id},[o.courseStatus==="classOpen"?(a(),i("div",H,[m(_,{to:`/course/${o.id}`,class:"text-decoration-none"},{default:b(()=>[t("div",G,[t("img",{src:o.imageUrl,class:"card-img-top img-cover img-hover-enlarge",alt:"..."},null,8,M)]),t("div",q,[t("span",J,e(o.category),1),K])]),_:2},1032,["to"]),t("div",Q,[t("div",W,[t("div",X,[t("h5",null,e(o.title),1),s.showbookmarkData.includes(o.id)?(a(),i("i",{key:0,class:"bi bi-bookmark-fill img-hover-enlarge",onClick:r=>s.BookmarkAction(o.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,Y)):(a(),i("i",{key:1,class:"bi bi-bookmark img-hover-enlarge",onClick:r=>s.BookmarkAction(o.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,Z))]),t("div",tt,[t("div",ot,[t("p",st,[et,c(" "+e(o.unit)+" 小時 ",1)]),t("p",at,[it,c(" "+e(o.classSectionNum)+" 章節 "+e(o.classUnitNum)+" 單元 ",1)])]),t("p",null,[t("del",null,"NT$ "+e(o.origin_price),1),t("span",nt," NT$ "+e(o.price),1)]),t("div",rt,[t("p",ct," 同學 "+e(s.matchStuNumAndClass(o.id))+" 人 ",1),s.showCheck.includes(o.id)?(a(),i("a",lt," 已選購，結帳去 ")):(a(),i("button",{key:1,disabled:s.sendLoadItem===!0,onClick:r=>s.addToCart(o.id),class:"btn btn-outline-primary btn-sm"}," 加入購物車 ",8,dt))])])])])])):o.courseStatus==="classFunding"?(a(),i("div",ht,[m(_,{to:`/course/${o.id}`,class:"text-decoration-none"},{default:b(()=>[t("div",mt,[t("img",{src:o.imageUrl,class:"card-img-top img-cover img-hover-enlarge",alt:"..."},null,8,_t)]),t("div",gt,[t("span",bt,e(o.category),1),ut])]),_:2},1032,["to"]),t("div",pt,[t("div",yt,[t("div",kt,[t("h5",null,e(o.title),1),s.showbookmarkData.includes(o.id)?(a(),i("i",{key:0,class:"bi bi-bookmark-fill img-hover-enlarge",onClick:r=>s.BookmarkAction(o.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,vt)):(a(),i("i",{key:1,class:"bi bi-bookmark img-hover-enlarge",onClick:r=>s.BookmarkAction(o.id),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}},null,8,ft))]),s.showFinalStuOrderData?(a(),i("div",wt,[t("p",Ct,[c(" 募資價 "),t("span",Dt," NT$ "+e(o.funding_price),1)]),t("div",xt,[t("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100",style:L({width:s.matchFundingTarget(o.id)+"%"})},null,4)]),t("div",St,[t("p",Lt," 達標率 "+e(s.matchFundingTarget(o.id))+" % ",1),t("p",At,[t("span",$t,e(f.countLeftDay(o.fundingEndDate)),1),c(" 結束 ")])]),t("div",Nt,[t("p",Tt," 同學 "+e(s.matchStuNumAndClass(o.id))+" 人 ",1),s.showCheck.includes(o.id)?(a(),i("a",Bt," 已選購，結帳去 ")):(a(),i("button",{key:1,onClick:r=>s.addToCart(o.id),class:"btn btn-outline-primary btn-sm"}," 加入購物車 ",8,Vt))])])):u("",!0)])])])):u("",!0)]))),128))])])])}const Ht=C(N,[["render",Pt]]);export{Ht as default};
