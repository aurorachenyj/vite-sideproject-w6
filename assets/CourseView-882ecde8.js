import{h as v}from"./zh-tw-a6f00c05.js";import{_ as f,m as r,d,o as i,c as l,a as s,t as a,k as c,G as w,j as u,I as h,F as _,D}from"./index-8ab29a44.js";import{c as b}from"./cartStore-7c0f204d.js";import{f as g}from"./frontOrderStore-1a191e2e.js";import{b as p}from"./bookmarkStore-9eef7024.js";import"./Toast-6cabf889.js";const{VITE_APP_URL:k,VITE_APP_PATH:y}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"aurora-path",BASE_URL:"/vue-learnFund/",MODE:"production",DEV:!1,PROD:!0},S={data(){return{activeItem:"",classId:this.$route.params.id,classData:{},currentCategory:"",similarClasses:[],checkBuyStatus:!1}},mounted(){this.classId=this.$route.params.id,this.getClassData(),this.getCartList(),this.getStuOrderList()},computed:{...r(b,["cartList"]),...r(g,["showFinalStuOrderData"]),...r(p,["showbookmarkData"])},watch:{showbookmarkData(){this.setLocalStorageBookmark()},currentCategory(){this.getSmilarClassData()},cartList(){this.checkBuyStatus=this.cartList.carts.some(o=>o.product_id===this.classId)},showFinalStuOrderData(){this.matchStuNumAndClass(),this.matchFundingTarget()}},methods:{...d(b,["getCartList","addToCart"]),...d(g,["getStuOrderList","matchStuNumAndClass","matchFundingTarget","matchFundingMoney"]),...d(p,["setLocalStorageBookmark","getLocalStorageBookmark","BookmarkAction"]),countLeftDay(o){return Date.parse(new Date)>o?"已結束":(o=new Date(o).toISOString(),v(o).fromNow())},refreshPage(o){this.classId=o,this.$router.push(`/course/${o}`),this.getClassData(),this.getSmilarClassData(),window.scrollTo(0,0)},getClassData(){this.$http.get(`${k}/api/${y}/product/${this.classId}`).then(o=>{this.classData=o.data.product,this.currentCategory=o.data.product.category}).catch(()=>{this.$router.push("/notFound")})},getSmilarClassData(){this.$http.get(`${k}/api/${y}/products?category=${this.currentCategory}`).then(o=>{this.similarClasses=o.data.products.filter(e=>e.id!==this.classId)}).catch(o=>{console.log(o)})}}},C={class:"d-md-none fixed-bottom py-2 shadow-lg bg-light"},I={class:"container"},T={class:"btn w-25",type:"button"},x={key:0,class:"btn btn-primary w-75",href:"#/cart"},B={class:"container full-height"},L={class:"row my-3 g-3"},A={class:"col-md-7"},N={class:"ratio ratio-16x9 h-100"},F=["src"],P={key:0,class:"col-md-5 sticky-md-top",style:{top:"100px"}},E={class:"card h-100"},V={class:"card-body"},M={class:"w-25 badge bg-white text-primary border border-primary mb-3"},O=s("span",{class:"w-25 badge bg-secondary mb-3 ms-2"}," 募資中 ",-1),z={class:"bg-light p-3 my-3"},H={class:"text-muted mb-0"},U={class:"text-dark mb-2"},j={class:"fw-bold"},R={class:"progress"},G={class:"d-flex justify-content-between mt-2"},q={class:"mb-0"},J={class:"text-secondary fw-bold fs-5"},K={class:"mb-0"},Q={class:"d-flex mt-3 py-3 justify-content-between",style:{background:"white"}},W={class:"text-center w-50"},X={class:"mb-0"},Y=s("br",null,null,-1),Z={class:"fs-4 fw-bold text-primary"},$={class:"border-start text-center w-50"},ss={class:"mb-0"},ts=s("br",null,null,-1),os={class:"fs-4"},es={class:"btn w-25",type:"button"},as={key:0,class:"btn btn-primary w-75",href:"#/cart"},is={key:1,class:"col-md-5 sticky-md-top",style:{top:"100px"}},ls={class:"card h-100"},ns={class:"card-body"},cs={class:"d-flex flex-column h-100"},rs={class:"d-flex"},ds={class:"w-25 badge bg-white text-primary border border-primary mb-3"},hs=s("span",{class:"w-25 badge bg-darkblue mb-3 ms-2"}," 已開課 ",-1),ms={class:"border-bottom mb-3"},us={class:"h4 text-primary fw-bold my-3"},_s={class:"ms-1 fs-6 text-muted fw-light"},bs={class:"mb-3"},gs=s("i",{class:"bi bi-people-fill"},null,-1),ps={class:"mb-1"},ks=s("i",{class:"bi bi-book"},null,-1),ys=s("i",{class:"bi bi-card-list"},null,-1),vs={class:"mt-auto"},fs={class:"btn w-25",type:"button"},ws={key:0,class:"btn btn-primary text-white w-75",href:"#/cart"},Ds={class:"col-md-7 mb-3"},Ss={class:"card"},Cs={class:"card-body"},Is={class:"nav nav-tabs mb-3 sticky-top bg-white",style:{top:"95px"}},Ts={class:"nav-item"},xs={class:"nav-item"},Bs={class:"nav-item"},Ls=s("h4",{id:"classSection",name:"classSection",class:"text-secondary fw-bold"}," 課程章節 ",-1),As=["innerHTML"],Ns=s("h4",{id:"getSkill",class:"text-secondary fw-bold"},"收穫技能",-1),Fs=["innerHTML"],Ps=s("p",null,null,-1),Es=s("h4",{id:"teacherInfo",class:"text-secondary fw-bold"},"講師介紹",-1),Vs=["innerHTML"],Ms={class:"row g-3 my-5"},Os=s("h4",{class:"text-secondary fw-bold"},"類似課程推薦...",-1),zs=["onClick"],Hs={class:"row align-items-center g-0"},Us={class:"col-4 col-md-12"},js={class:"ratio ratio-4x3 overflow-hidden"},Rs=["src"],Gs={class:"col-8 col-md-12"},qs={class:"h-100 d-flex flex-column"},Js={class:"card-body"},Ks={class:"truncate"},Qs={class:"d-flex flex-column mt-auto flex-lg-row justify-content-between align-items-lg-center"},Ws={class:"mb-0 text-muted"},Xs=s("i",{class:"bi bi-book"},null,-1),Ys={class:"text-primary fw-bold fs-3 mb-0"},Zs=s("br",null,null,-1),$s=s("br",null,null,-1),st=s("br",null,null,-1),tt=s("br",null,null,-1),ot=s("br",null,null,-1),et=s("br",null,null,-1);function at(o,e,it,lt,t,m){return i(),l(_,null,[s("div",C,[s("div",I,[s("button",T,[o.showbookmarkData.includes(t.classData.id)?(i(),l("i",{key:0,class:"bi bi-bookmark-fill img-hover-enlarge",onClick:e[0]||(e[0]=n=>o.BookmarkAction(t.classData.id)),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}})):(i(),l("i",{key:1,class:"bi bi-bookmark img-hover-enlarge",onClick:e[1]||(e[1]=n=>o.BookmarkAction(t.classData.id)),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}}))]),t.checkBuyStatus?(i(),l("a",x," 已購買，結帳去 ")):(i(),l("button",{key:1,onClick:e[2]||(e[2]=n=>o.addToCart(t.classData.id)),class:"btn btn-outline-primary w-75",type:"button"}," 加入購物車 "))])]),s("div",B,[s("div",L,[s("div",A,[s("div",N,[s("img",{style:{"background-position":"bottom"},class:"img-cover",src:t.classData.imageUrl,alt:""},null,8,F)])]),t.classData.courseStatus==="classFunding"?(i(),l("div",P,[s("div",E,[s("div",V,[s("span",M,a(t.classData.category),1),O,s("h4",null,a(t.classData.title),1),s("div",z,[s("p",H," 募資達標門檻 NT$ "+a(t.classData.funding_target),1),s("p",U,[c(" 已募資金額 "),s("span",j," NT$ "+a(o.matchFundingMoney(t.classData.id)),1)]),s("div",R,[s("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100",style:w({width:o.matchFundingTarget(t.classData.id)+"%"})},null,4)]),c(" 達標率 "+a(o.matchFundingTarget(t.classData.id))+"% ",1),s("div",G,[s("p",q,[c(" 募資倒數 "),s("span",J,a(m.countLeftDay(t.classData.fundingEndDate)),1)]),s("p",K," 同學 "+a(o.matchStuNumAndClass(t.classData.id))+" 人 ",1)]),s("div",Q,[s("div",W,[s("p",X,[c(" 募資優惠價 "),Y,s("span",Z," NT$ "+a(t.classData.funding_price),1)])]),s("div",$,[s("p",ss,[c(" 正式售價 "),ts,s("del",os," NT$ "+a(t.classData.origin_price),1)])])])]),s("div",null,[s("button",es,[o.showbookmarkData.includes(t.classData.id)?(i(),l("i",{key:0,class:"bi bi-bookmark-fill img-hover-enlarge",onClick:e[3]||(e[3]=n=>o.BookmarkAction(t.classData.id)),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}})):(i(),l("i",{key:1,class:"bi bi-bookmark img-hover-enlarge",onClick:e[4]||(e[4]=n=>o.BookmarkAction(t.classData.id)),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}}))]),t.checkBuyStatus?(i(),l("a",as," 已購買，結帳去 ")):(i(),l("button",{key:1,onClick:e[5]||(e[5]=n=>o.addToCart(t.classData.id)),class:"btn btn-outline-primary w-75",type:"button"}," 加入購物車 "))])])])])):u("",!0),t.classData.courseStatus==="classOpen"?(i(),l("div",is,[s("div",ls,[s("div",ns,[s("div",cs,[s("div",rs,[s("span",ds,a(t.classData.category),1),hs]),s("div",ms,[s("h4",null,a(t.classData.title),1),s("p",us,[c(" NT$ "+a(t.classData.price)+" ",1),s("del",_s," NT$ "+a(t.classData.origin_price),1)]),s("p",bs,[gs,c(" 同學 "+a(o.matchStuNumAndClass(t.classData.id))+" 人 ",1)])]),s("p",ps,[ks,c(" 課程總時數："+a(t.classData.unit)+" 小時 ",1)]),s("p",null,[ys,c(" 章節單元數："+a(t.classData.classSectionNum)+" 章節 "+a(t.classData.classUnitNum)+" 單元 ",1)]),s("div",vs,[s("button",fs,[o.showbookmarkData.includes(t.classData.id)?(i(),l("i",{key:0,class:"bi bi-bookmark-fill img-hover-enlarge",onClick:e[6]||(e[6]=n=>o.BookmarkAction(t.classData.id)),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}})):(i(),l("i",{key:1,class:"bi bi-bookmark img-hover-enlarge",onClick:e[7]||(e[7]=n=>o.BookmarkAction(t.classData.id)),style:{"font-size":"1.5rem",color:"orange","font-weight":"500",cursor:"pointer"}}))]),t.checkBuyStatus?(i(),l("a",ws," 已購買，結帳去 ")):(i(),l("button",{key:1,onClick:e[8]||(e[8]=n=>o.addToCart(t.classData.id)),class:"btn btn-outline-primary w-75",type:"button"}," 加入購物車 "))])])])])])):u("",!0),s("div",Ds,[s("div",Ss,[s("div",Cs,[s("ul",Is,[s("li",Ts,[s("a",{class:h([{active:t.activeItem==="course"},"nav-link fw-bold"]),onclick:"{document.getElementById('classSection').scrollIntoView(),activeItem='course'}"},"課程章節",2)]),s("li",xs,[s("a",{class:h([{active:t.activeItem==="skillTree"},"nav-link fw-bold"]),onclick:"{document.getElementById('getSkill').scrollIntoView() ,activeItem='skillTree'}"},"收穫技能",2)]),s("li",Bs,[s("a",{class:h([{active:t.activeItem==="teacherInfo"},"nav-link fw-bold"]),onclick:"{document.getElementById('teacherInfo').scrollIntoView(),activeItem='teacherInfo'}"},"講師介紹",2)])]),s("div",null,[Ls,s("div",{innerHTML:t.classData.content,class:"border-bottom mb-3"},null,8,As),Ns,s("div",{innerHTML:t.classData.skillTree,class:"border-bottom mb-3"},null,8,Fs),Ps,Es,s("div",{innerHTML:t.classData.teacherInfo,class:"mb-3"},null,8,Vs)])])])])]),s("div",Ms,[Os,(i(!0),l(_,null,D(t.similarClasses,n=>(i(),l("div",{class:"col-md-4",key:n.id},[s("div",{class:"card h-100 hover-pointer",onClick:nt=>m.refreshPage(n.id)},[s("div",Hs,[s("div",Us,[s("div",js,[s("img",{src:n.imageUrl,class:"card-img-top img-cover p-2 p-md-0 img-hover-enlarge",alt:"..."},null,8,Rs)])]),s("div",Gs,[s("div",qs,[s("div",Js,[s("h5",Ks,a(n.title),1),s("div",Qs,[s("p",Ws,[Xs,c(" 課程時數 "+a(n.unit)+" 小時 ",1)]),s("p",Ys," NT$ "+a(n.price),1)])])])])])],8,zs)]))),128))]),Zs,$s,st,tt,ot,et])],64)}const _t=f(S,[["render",at]]);export{_t as default};
